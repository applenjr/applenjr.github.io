<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NJR10byh Tutu</title>
    <link rel="stylesheet" href="njr10byh.css" />
    <!-- 引入jquery -->
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="text">
        <p>南京邮电大学2021年</p>
        <p>研究生入学考试考场查询</p>
      </div>
      <div class="box">
        <div class="part1">
          <div class="njuptlogo">
            <img src="./NJUPT.png" alt="NJUPT" width="120px" height="120px" />
          </div>
          <div class="user">
            <div class="username">
              <input
                id="name"
                type="text"
                placeholder="请输入姓名"
                value=""
              />
            </div>
            <div class="password">
              <input
                id="number"
                type="text"
                placeholder="请输入准考证号"
                value=""
              />
            </div>
            <button onclick="Search()">查询</button>
          </div>
        </div>
        <div class="part2">
          <div class="part2box">
            <p id="errorinfo" class="Cuo"></p>
            <p id="errorname" class="Cuo"></p>
            <p id="errornumber" class="Cuo"></p>
            <p id="error" class="Cuo"></p>
            <p id="username"></p>
            <p id="usernumber"></p>
            <p id="userclassroomnumber"></p>
            <p id="userclassroom"></p>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    var res = "";
    function test(result) {
      //回调函数名称(indexDemo)，需要与 src 中一致，而且要与文件地址中名一致。jsonp格式 名称({})
      //不然无法获取到对应的文件
      // console.log(result); //打印 indexDemo.json 中的数据
      res = result;
    }
    function Search() {
      // 考生输入信息
      var Name = document.getElementById("name").value;
      var Number = document.getElementById("number").value;

      // 反馈考生错误信息
      var Errorinfo = document.getElementById("errorinfo");
      var Errorname = document.getElementById("errorname");
      var Errornumber = document.getElementById("errornumber");
      var Error = document.getElementById("error");

      // 反馈考生正确信息
      var Username = document.getElementById("username");
      var Usernumber = document.getElementById("usernumber");
      var Userclassroomnumber = document.getElementById("userclassroomnumber");
      var Userclassroom = document.getElementById("userclassroom");

      if (Name == "" || Number == "") {
        if (Name == "" && Number == "") {
          Errorinfo.innerHTML = "请填写考生姓名和准考证号! ";
          Errorname.innerHTML = "";
          Errornumber.innerHTML = "";
          Error.innerHTML = "";
          Username.innerHTML = "";
          Usernumber.innerHTML = "";
          Userclassroomnumber.innerHTML = "";
          Userclassroom.innerHTML = "";
        } else if (Name == "") {
          Errorinfo.innerHTML = "";
          Errorname.innerHTML = "请填写考生姓名! ";
          Errornumber.innerHTML = "";
          Error.innerHTML = "";
          Username.innerHTML = "";
          Usernumber.innerHTML = "";
          Userclassroomnumber.innerHTML = "";
          Userclassroom.innerHTML = "";
        } else if (Number == "") {
          Errorinfo.innerHTML = "";
          Errorname.innerHTML = "";
          Errornumber.innerHTML = "请填写准考证号! ";
          Error.innerHTML = "";
          Username.innerHTML = "";
          Usernumber.innerHTML = "";
          Userclassroomnumber.innerHTML = "";
          Userclassroom.innerHTML = "";
        }
      } else if (Name != "" && Number != "") {
        // console.log(res[0]);
        // console.log(res.length);
        for (i = 0; i < res.length; i++) {
          if (res[i].考生姓名 == Name && res[i].考生编号 == Number) {
            // console.log(i);
            Errorinfo.innerHTML = "";
            Errorname.innerHTML = "";
            Errornumber.innerHTML = "";
            Error.innerHTML = "";
            Username.innerHTML = "考生姓名: " + res[i].考生姓名;
            Usernumber.innerHTML = "考生编号: " + res[i].考生编号;
            Userclassroomnumber.innerHTML = "考场号: " + res[i].考场号;
            Userclassroom.innerHTML = "教室号: " + res[i].教室号;
            break;
          }
        }
        if (i == 6) {
          Errorinfo.innerHTML = "";
          Errorname.innerHTML = "";
          Errornumber.innerHTML = "";
          Error.innerHTML = "未找到相关信息";
          Username.innerHTML = "";
          Usernumber.innerHTML = "";
          Userclassroomnumber.innerHTML = "";
          Userclassroom.innerHTML = "";
        }
      }
    }
  </script>
  <script type="text/javascript" src="data.json?callback=test"></script>
</html>
