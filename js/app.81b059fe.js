(function(e){function t(t){for(var n,s,l=t[0],c=t[1],r=t[2],d=0,u=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);f&&f(t);while(u.length)u.shift()();return i.push.apply(i,r||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},s={app:0},o={app:0},i=[];function l(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-072d4340":"ddd9a515","chunk-28f0112b":"3daef46d"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-072d4340":1,"chunk-28f0112b":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-072d4340":"e4150a1a","chunk-28f0112b":"f506f81f"}[e]+".css",o=c.p+n,i=document.getElementsByTagName("link"),l=0;l<i.length;l++){var r=i[l],d=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(d===n||d===o))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){r=u[l],d=r.getAttribute("data-href");if(d===n||d===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete s[e],f.parentNode.removeChild(f),a(i)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){s[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=i);var r,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=l(e);var u=new Error;r=function(t){d.onerror=d.onload=null,clearTimeout(f);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",u.name="ChunkLoadError",u.type=n,u.request=s,a[1](u)}o[e]=void 0}};var f=setTimeout((function(){r({type:"timeout",target:d})}),12e4);d.onerror=d.onload=r,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var f=d;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00ea":function(e,t,a){},"02ea":function(e,t,a){},"034f":function(e,t,a){"use strict";a("85ec")},"051e":function(e,t,a){},"056a":function(e,t,a){},"0e41":function(e,t,a){"use strict";a("bd03")},"11e3":function(e,t,a){},"15c9":function(e,t,a){},"181c":function(e,t,a){},"1f57":function(e,t,a){"use strict";a("051e")},"22b4":function(e,t,a){"use strict";a("3b30")},"23fd":function(e,t,a){"use strict";a("73f2")},2779:function(e,t,a){"use strict";a("9b3f")},"2a15":function(e,t,a){},"2c6a":function(e,t,a){"use strict";a("db90")},"2f03":function(e,t,a){"use strict";a("88d9")},"34c4":function(e,t,a){},"3b30":function(e,t,a){},"406b":function(e,t,a){},"409f":function(e,t,a){"use strict";a("6aa7")},"4ff1":function(e,t,a){},5051:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],i={data:function(){return{}}},l=i,c=(a("034f"),a("2877")),r=Object(c["a"])(l,s,o,!1,null,null,null),d=r.exports,u=(a("d3b7"),a("8c4f")),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"box"},[a("div",{staticClass:"module",on:{click:e.UserList}},[e._m(0),a("div",{staticClass:"bottom"},[e._v(" 用户列表 ")])]),a("div",{staticClass:"module",staticStyle:{cursor:"pointer"},on:{click:e.Edituser}},[e._m(1),a("div",{staticClass:"bottom"},[e._v(" 修改信息 ")])]),["ROOT","ADMIN"].includes(e.userRole)?a("div",{staticClass:"module",on:{click:e.Authorize}},[e._m(2),a("div",{staticClass:"bottom"},[e._v(" 人员管理 ")])]):e._e()]),a("div",{staticClass:"loginout"},[a("el-button",{on:{click:e.loginOut}},[e._v(" 注销 ")])],1)])},p=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"top"},[n("img",{attrs:{src:a("7d6c")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"top"},[n("img",{attrs:{src:a("da3e")}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"top"},[n("img",{attrs:{src:a("c8ec")}})])}],v=(a("c975"),a("bc3a")),m=a.n(v);m.a.defaults.headers.common["Authorization"]=localStorage.getItem("token");var h={created:function(){var e=this;null!=localStorage.getItem("token")&&m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.uesrInfo=t.data,e.userRole=t.data.role}))},mounted:function(){-1==location.href.indexOf("#reloaded")&&(location.href=location.href+"#reloaded",location.reload())},data:function(){return{userRole:"",uesrInfo:{}}},methods:{UserList:function(){console.log("UserList"),this.$router.push({path:"/userList"})},Authorize:function(){console.log("Authorize"),this.$router.push({path:"/authorize"})},Edituser:function(){console.log("Edituser");var e=this;this.$router.push({path:"/edituser",query:e.uesrInfo})},loginOut:function(){var e=this;this.$confirm("您确定要退出吗?","退出管理平台",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){window.localStorage.removeItem("token"),setTimeout((function(){e.$router.push({path:"/"})}),1e3)})).catch((function(){}))}}},b=h,g=(a("23fd"),Object(c["a"])(b,f,p,!1,null,null,null)),k=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-Register"},[a("div",{staticClass:"head-btn"},[a("div",{staticClass:"oper-btns-left"},[a("div",{staticClass:"refresh"},[a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新列表 ")])],1),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("div",{staticClass:"search"},[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),["ROOT","ADMIN"].includes(e.userRole)?a("div",{staticClass:"oper-btns-right"},[a("el-button",{staticClass:"bigdel-btn",attrs:{icon:"el-icon-delete"},on:{click:e.delectExtraInfo}},[e._v("批量删除")])],1):e._e()]),a("el-table",{ref:"multipleTable",staticClass:"extraTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleDetailSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"100"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),a("el-table-column",{attrs:{prop:"email",label:"用户邮箱"}}),a("el-table-column",{attrs:{prop:"userrole",label:"用户权限"}}),["ROOT","ADMIN"].includes(e.userRole)?a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3922900450)}):e._e()],1)],1)},x=[],_=(a("4160"),a("a434"),a("b0c0"),a("159b"),{created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.userRole=t.data.role})),setTimeout((function(){m.a.get("http://47.102.214.37:8080/user/query").then((function(t){console.log(t),e.total=t.data.content.length;for(var a=0;a<t.data.content.length;a++)"ROOT"==t.data.content[a].role?e.tableData.unshift({id:t.data.content[a].id,username:t.data.content[a].username,userrole:t.data.content[a].role,name:t.data.content[a].name,email:t.data.content[a].email}):"ADMIN"==t.data.content[a].role&&e.tableData.push({id:t.data.content[a].id,username:t.data.content[a].username,userrole:t.data.content[a].role,name:t.data.content[a].name,email:t.data.content[a].email});for(var n=0;n<t.data.content.length;n++)"ROOT"!=t.data.content[n].role&&"ADMIN"!=t.data.content[n].role&&e.tableData.push({id:t.data.content[n].id,username:t.data.content[n].username,userrole:t.data.content[n].role,name:t.data.content[n].name,email:t.data.content[n].email})}))}),200)},data:function(){return{userRole:"",tableData:[],checkedDetail:[],currentPage:1,page:1,size:10,total:0,username:"",name:"",email:""}},methods:{handleDetailSelectionChange:function(e){this.checkedDetail=e,console.log(this.checkedDetail)},refresh:function(){var e=this;e.tableData=[],m.a.get("http://47.102.214.37:8080/user/query").then((function(t){console.log(t),e.total=t.data.content.length;for(var a=0;a<t.data.content.length;a++)"ROOT"==t.data.content[a].role?e.tableData.unshift({id:t.data.content[a].id,username:t.data.content[a].username,userrole:t.data.content[a].role,name:t.data.content[a].name,email:t.data.content[a].email}):"ADMIN"==t.data.content[a].role&&e.tableData.push({id:t.data.content[a].id,username:t.data.content[a].username,userrole:t.data.content[a].role,name:t.data.content[a].name,email:t.data.content[a].email});for(var n=0;n<t.data.content.length;n++)"ROOT"!=t.data.content[n].role&&"ADMIN"!=t.data.content[n].role&&e.tableData.push({id:t.data.content[n].id,username:t.data.content[n].username,userrole:t.data.content[n].role,name:t.data.content[n].name,email:t.data.content[n].email});e.$message({message:"列表已更新",type:"success"})})).catch((function(t){console.log(t.response),e.$message({message:"列表刷新失败",type:"error"})}))},handleEdit:function(e){console.log(this.tableData[e]),this.$router.push({path:"/edituser",query:this.tableData[e]})},handleDelete:function(e){var t=this,a=this;this.$confirm("删除后无法更改, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="http://47.102.214.37:8080/user/"+a.tableData[e].id;console.log(n),m.a.delete(n).then((function(){a.tableData.splice(e,1),a.total--,t.$message({message:"删除成功",type:"success"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},delectExtraInfo:function(){var e=this,t=this;0==this.checkedDetail.length?t.$alert("请先选择要删除的数据","提示",{confirmButtonText:"确定"}):t.$confirm("此用户将被永久删除, \n是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.checkedDetail.forEach((function(a){t.tableData.forEach((function(n,s){if(a.id==n.id){console.log(a,n,s);var o="http://47.102.214.37:8080/user/"+n.id;console.log(o),m.a.delete(o).then((function(){console.log(s),e.$message({message:"删除成功",type:"success"}),t.tableData.splice(s,1),t.checkedDetail.pop(),t.total--}))}}))}))})).catch((function(){e.$message.info("已取消删除")}))},search:function(){var e=this;console.log(e.username),console.log(e.name),console.log(e.email);var t="http://47.102.214.37:8080/user/query?name==高凡&username==test-o";""!=e.username||""!=e.name||""!=e.email?(""!=e.username?(t="http://47.102.214.37:8080/user/query?username=="+e.username,""!=e.name?(t="http://47.102.214.37:8080/user/query?username=="+e.username+"&name=="+e.name,""!=e.email&&(t="http://47.102.214.37:8080/user/query?username=="+e.username+"&name=="+e.name+"&email=="+e.email)):""==e.name&&""!=e.email&&(t="http://47.102.214.37:8080/user/query?username=="+e.username+"&email=="+e.email)):""==e.username&&(""!=e.name?(t="http://47.102.214.37:8080/user/query?name=="+e.name,""!=e.email&&(t="http://47.102.214.37:8080/user/query?name=="+e.name+"&email=="+e.email)):""==e.name&&""!=e.email&&(t="http://47.102.214.37:8080/user/query?email=="+e.email)),console.log(t),m.a.get(t).then((function(t){console.log(t.data),e.tableData=[],e.total=t.data.content.length;for(var a=0;a<t.data.content.length;a++)e.tableData.unshift({id:t.data.content[a].id,username:t.data.content[a].username,userrole:t.data.content[a].role,name:t.data.content[a].name,email:t.data.content[a].email})}))):e.$message({message:"请输入搜索条件",type:"warning"})}}}),C=_,T=(a("1f57"),Object(c["a"])(C,y,x,!1,null,null,null)),I=T.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-Authorize"},[a("div",{staticClass:"box register"},[e._m(0),a("div",{staticClass:"input-body"},[["ADMIN"].includes(e.userRole)?a("span",[e._v("可以创建三种普通用户权限")]):e._e(),a("el-input",{staticClass:"userinfoinput",attrs:{placeholder:"姓名",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-input",{staticClass:"userinfoinput",attrs:{placeholder:"用户名",clearable:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("el-input",{staticClass:"userinfoinput",attrs:{placeholder:"邮箱",clearable:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("el-input",{staticClass:"userinfoinput",attrs:{type:"password","show-password":"",placeholder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("el-input",{staticClass:"userinfoinput",attrs:{type:"password","show-password":"",placeholder:"确认密码"},model:{value:e.confirmpassword,callback:function(t){e.confirmpassword=t},expression:"confirmpassword"}}),a("el-select",{attrs:{placeholder:"权限选择",clearable:""},model:{value:e.value_left,callback:function(t){e.value_left=t},expression:"value_left"}},e._l(e.options_left,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("div",{staticClass:"login-btn"},[a("el-button",{on:{click:e.register}},[e._v("注册")])],1)]),a("div",{staticClass:"box"},[e._m(1),a("div",{staticClass:"select-body"},[["ROOT"].includes(e.userRole)?a("span",[e._v("只能创建一个管理员，以及三种普通用户权限")]):e._e(),["ADMIN"].includes(e.userRole)?a("span",[e._v("可以创建三种普通用户权限")]):e._e(),a("el-select",{attrs:{placeholder:"人员选择",clearable:"",filterable:"",multiple:""},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options1,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)})),1),a("el-select",{attrs:{placeholder:"权限选择",clearable:""},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options2,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("div",{staticClass:"login-btn"},[a("el-button",{on:{click:e.authorize}},[e._v("确定授权")])],1)])])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head"},[a("div",{staticClass:"head-text"},[e._v("注册")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head"},[a("div",{staticClass:"head-text"},[e._v("授权")])])}],$={created:function(){var e=this,t=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(a){e.userRole=a.data.role,"ADMIN"==e.userRole&&t.options2.shift()})),m.a.get("http://47.102.214.37:8080/user/query?role=!ROOT").then((function(e){console.log(e.data),setTimeout((function(){for(var a=0;a<e.data.content.length;a++)"ADMIN"==e.data.content[a].role&&(t.options1[0].options.push({value:e.data.content[a].id,label:e.data.content[a].name+" (用户名："+e.data.content[a].username+")"}),t.options2[0].disabled=!0),"CREATOR"==e.data.content[a].role&&t.options1[1].options.push({value:e.data.content[a].id,label:e.data.content[a].name+" (用户名："+e.data.content[a].username+")"}),"OPERATOR"==e.data.content[a].role&&t.options1[2].options.push({value:e.data.content[a].id,label:e.data.content[a].name+" (用户名："+e.data.content[a].username+")"}),"SUPERVISOR"==e.data.content[a].role&&t.options1[3].options.push({value:e.data.content[a].id,label:e.data.content[a].name+" (用户名："+e.data.content[a].username+")"})}),200)}))},data:function(){return{userRole:"",name:"",username:"",email:"",password:"",confirmpassword:"",options_left:[{value:"CREATOR",label:"CREATOR"},{value:"OPERATOR",label:"OPERATOR"},{value:"SUPERVISOR",label:"SUPERVISOR"}],value_left:"",options1:[{label:"ADMIN",options:[]},{label:"CREATOR",options:[]},{label:"OPERATOR",options:[]},{label:"SUPERVISOR",options:[]}],options2:[{value:"ADMIN",label:"ADMIN",disabled:!1},{value:"CREATOR",label:"CREATOR"},{value:"OPERATOR",label:"OPERATOR"},{value:"SUPERVISOR",label:"SUPERVISOR"}],value1:[],value2:""}},methods:{register:function(){var e=this;""==e.name||""==e.username||""==e.email||""==e.password||""==e.confirmpassword||""==e.value_left?e.$message({message:"请将信息填写完整",type:"warning"}):e.password!=e.confirmpassword?e.$message({message:"两次密码输入不一致",type:"error"}):(console.log(e.name),console.log(e.username),console.log(e.email),console.log(e.password),console.log(e.confirmpassword),console.log(e.value_left),m.a.post("http://47.102.214.37:8080/user/register",{name:e.name,username:e.username,email:e.email,password:e.confirmpassword,role:e.value_left}).then((function(t){console.log(t),e.$message({message:"注册成功",type:"success"}),e.name="",e.username="",e.email="",e.password="",e.confirmpassword="",e.value_left=""})))},authorize:function(){var e=this;console.log(e.value1),console.log(e.value2);for(var t=function(t){console.log(e.value1[t]);var a="http://47.102.214.37:8080/user/"+e.value1[t];m.a.get(a).then((function(t){var n={email:t.data.email,id:t.data.id,name:t.data.name,role:e.value2,username:t.data.username,enable:t.data.enable};setTimeout((function(){console.log(n),m.a.put(a,n).then((function(t){console.log(t),e.$message({message:"授权成功",type:"success"}),e.$router.push("/users")})).catch((function(t){console.log(t.response),e.$message({message:"授权失败",type:"error"})}))}),200)}))},a=0;a<e.value1.length;a++)t(a)}}},z=$,S=(a("df4d"),Object(c["a"])(z,D,w,!1,null,null,null)),E=S.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-edituser"},[a("div",{staticClass:"Box"},[e._m(0),a("div",{staticClass:"input-body"},[a("span",[e._v("仅能修改姓名、邮箱和密码")]),a("span",[e._v("（注：不需要修改的内容可不用填写）")]),a("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-input",{attrs:{placeholder:"电子邮件",clearable:""},on:{change:e.Email},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("el-input",{attrs:{placeholder:"密码",clearable:"","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),""!=e.password?a("el-input",{attrs:{placeholder:"确认密码",clearable:"","show-password":""},model:{value:e.confirmpassword,callback:function(t){e.confirmpassword=t},expression:"confirmpassword"}}):e._e()],1),a("div",{staticClass:"login-btn"},[a("el-button",{on:{click:e.submit}},[e._v("保存修改")])],1)])])},R=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head"},[a("div",{staticClass:"head-text"},[e._v("修改信息")])])}],O=(a("4d63"),a("ac1f"),a("25f0"),{created:function(){var e=this;console.log(this.$route.query),e.userid=this.$route.query.id,e.name=this.$route.query.name,e.email=this.$route.query.email},data:function(){return{name:"",userid:"",email:"",password:"",confirmpassword:""}},methods:{Email:function(){var e=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");e.test(this.email)||(this.$message({message:"请输入正确的邮箱地址",type:"error"}),this.email="")},submit:function(){var e=this;if(console.log(e.name),console.log(e.email),console.log(e.userid),console.log(e.password),console.log(e.confirmpassword),e.password===e.confirmpassword){var t="http://47.102.214.37:8080/user/"+e.userid;m.a.get(t).then((function(a){var n={email:e.email,id:a.data.id,name:e.name,role:a.data.role,username:a.data.username,enable:a.data.enable,password:e.confirmpassword};setTimeout((function(){console.log(n),m.a.put(t,n).then((function(t){console.log(t),e.$message({message:"修改成功",type:"success"}),e.$router.push("./users")})).catch((function(t){console.log(t.response),e.$message({message:"修改失败",type:"error"})}))}),200)}))}else this.$message({message:"两次密码输入不一致，请重新输入",type:"warning"}),this.password="",this.confirmpassword=""}}}),N=O,A=(a("22b4"),Object(c["a"])(N,q,R,!1,null,null,null)),B=A.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return["ROOT","ADMIN","CREATOR"].includes(e.userRole)?a("div",{staticClass:"Main"},[a("el-breadcrumb",{staticClass:"Breadcrumb"},[a("el-breadcrumb-item",{staticClass:"left"},[e._v("设备管理")]),a("el-breadcrumb-item",{staticClass:"right"},[e._v("新增设备")])],1),a("div",{staticClass:"AddDeviceInfo"},[a("div",{staticClass:"BaseInfo"},[a("div",{staticClass:"BaseInfoText"},[e._v("基本信息")]),a("div",{staticClass:"BaseInfoTable"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"设备名称: ","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"设备品牌: ","label-width":e.formLabelWidth,prop:"brand"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备品牌"},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),a("el-form-item",{attrs:{label:"设备型号/规格: ","label-width":e.formLabelWidth,prop:"type"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备型号/规格"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),a("el-form-item",{attrs:{label:"设备编号: ","label-width":e.formLabelWidth,prop:"deviceNo"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备编号"},model:{value:e.form.deviceNo,callback:function(t){e.$set(e.form,"deviceNo",t)},expression:"form.deviceNo"}})],1),a("el-form-item",{attrs:{label:"是否为关键设备:","label-width":e.formLabelWidth,prop:"crux"}},[a("el-radio-group",{model:{value:e.form.crux,callback:function(t){e.$set(e.form,"crux",t)},expression:"form.crux"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"设备分类: ","label-width":e.formLabelWidth,prop:"clazz"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备分类"},model:{value:e.form.clazz,callback:function(t){e.$set(e.form,"clazz",t)},expression:"form.clazz"}})],1)],1),a("div",{staticClass:"submitbtn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitNewDevice(e.form)}}},[e._v("保存并提交")])],1)],1)]),a("div",{staticClass:"ExtraInfo"},[a("div",{staticClass:"ExtraInfoText"},[e._v("拓展信息")]),a("div",{staticClass:"Btns"},[a("el-button",{staticClass:"AddBtn",attrs:{icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增字段")]),a("el-button",{staticClass:"DelBtn",attrs:{icon:"el-icon-delete"},on:{click:e.delectExtraInfo}},[e._v("删除字段")])],1),a("el-dialog",{staticClass:"addExtraInfoDialog",attrs:{title:"新增字段",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.ExtraInfoDialog}},[a("el-form-item",{attrs:{label:"字段名称: ","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入字段名称"},model:{value:e.ExtraInfoDialog.name,callback:function(t){e.$set(e.ExtraInfoDialog,"name",t)},expression:"ExtraInfoDialog.name"}})],1),a("el-form-item",{attrs:{label:"字段类型: ","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择字段类型"},model:{value:e.ExtraInfoDialog.type,callback:function(t){e.$set(e.ExtraInfoDialog,"type",t)},expression:"ExtraInfoDialog.type"}},[a("el-option",{attrs:{label:"String (字符串型)",value:"String"}}),a("el-option",{attrs:{label:"Date (日期型)",value:"Date"}}),a("el-option",{attrs:{label:"Integer (数字型)",value:"Integer"}}),a("el-option",{attrs:{label:"Bool (布尔型)",value:"Bool"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.SubmitNewExtraInfo(e.ExtraInfoDialog)}}},[e._v("确 定")])],1)],1),a("el-table",{ref:"multipleTable",staticClass:"extraTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleDetailSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"extraname",label:"字段名"}}),a("el-table-column",{attrs:{label:"字段信息"},scopedSlots:e._u([{key:"default",fn:function(t){return["String"==t.row.type?a("el-input",{attrs:{placeholder:"请输入字段信息"},model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}}):e._e(),"Integer"==t.row.type?a("el-input",{attrs:{type:"number",placeholder:"请输入字段信息"},model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}}):e._e(),"Date"==t.row.type?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"large","value-format":"yyyy-MM-dd"},model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}}):e._e(),"Bool"==t.row.type?a("el-radio-group",{model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1):e._e()]}}],null,!1,3823509501)})],1),a("div",{staticClass:"ExtraInfoTable"})],1)])],1):e._e()},M=[],P=(a("caad"),{data:function(){return{userRole:"",form:{},ExtraInfoDialog:{},formLabelWidth:"150px",dialogFormVisible:!1,checkedDetail:[],tableData:[],extraid:[],extraobj:[],rules:{name:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],brand:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],type:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],deviceNo:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],crux:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],clazz:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}]}}},methods:{handleDetailSelectionChange:function(e){this.checkedDetail=e},SubmitNewExtraInfo:function(e){var t=this;console.log(e),""==e.name||void 0==e.type?this.$alert("请将基本信息填写完整！","提示",{confirmButtonText:"确定"}):m.a.post("http://47.102.214.37:8080/device/info-field",{name:e.name,type:e.type}).then((function(a){201==a.status&&(t.tableData.push({extraname:e.name,extrainfo:""}),m.a.get("http://47.102.214.37:8080/device/info-field").then((function(a){for(var n=0;n<a.data.length;n++)if(a.data[n].name==e.name){t.extraid.push(a.data[n].id);break}})),t.dialogFormVisible=!1)}))},delectExtraInfo:function(){var e=this,t=this;0==this.checkedDetail.length?t.$alert("请先选择要删除的数据","提示",{confirmButtonText:"确定"}):t.$confirm("现有的设备中属于该字段的所有信息都会被删除, \n是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.checkedDetail.forEach((function(a){t.tableData.forEach((function(n,s){if(a.extraname==n.extraname){console.log(t.tableData[s]),console.log(t.extraid[s]);var o="http://47.102.214.37:8080/device/info-field/"+t.extraid[s];m.a.delete(o).then((function(a){console.log(a),200==a.status?(t.tableData.splice(s,1),e.$message({message:"删除成功",type:"success"})):e.$message.error("删除失败")}))}}))}))})).catch((function(){e.$message.info("已取消删除")}))},submitNewDevice:function(e){var t=this,a=[],n=this;if(void 0==e.name||void 0==e.brand||void 0==e.type||void 0==e.deviceNo||void 0==e.crux||void 0==e.clazz)this.$alert("请将基本信息填写完整！","提示",{confirmButtonText:"确定"});else{var s={};"Y"==e.crux?s.crux=!0:"N"==e.crux&&(s.crux=!1);for(var o=0;o<n.tableData.length;o++)a.push({field:{id:n.extraid[o]},value:n.tableData[o].extrainfo});m.a.post("http://47.102.214.37:8080/device",{name:e.name,brand:e.brand,type:e.type,deviceNo:e.deviceNo,crux:s.crux,clazz:e.clazz,extra:a}).then((function(e){"ok"==e.data.message&&t.$message({message:"添加成功",type:"success"})})).catch((function(e){console.log(e)}))}}},created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.userRole=t.data.role})),setTimeout((function(){["ROOT","ADMIN","CREATOR"].includes(e.userRole)&&m.a.get("http://47.102.214.37:8080/device/info-field").then((function(t){console.log(t.data);for(var a=0;a<t.data.length;a++)e.extraid.push(t.data[a].id),e.tableData.push({extraname:t.data[a].name,extrainfo:"",type:t.data[a].type})}))}),200)}}),j=P,U=(a("2c6a"),Object(c["a"])(j,L,M,!1,null,null,null)),V=U.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Box"},[a("el-breadcrumb",{staticClass:"breadcrumb-top",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备管理")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("设备信息")])],1),a("el-main",{staticClass:"Main-Box"},[a("div",{staticClass:"head-btn"},[a("div",{staticClass:"oper-btns-left"},[a("div",{staticClass:"input",staticStyle:{"margin-left":"0"}},[a("el-input",{attrs:{placeholder:"设备名称"},model:{value:e.devicename,callback:function(t){e.devicename=t},expression:"devicename"}})],1),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"设备品牌"},model:{value:e.devicebrand,callback:function(t){e.devicebrand=t},expression:"devicebrand"}})],1),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"设备型号/规格"},model:{value:e.devicetype,callback:function(t){e.devicetype=t},expression:"devicetype"}})],1),a("div",{staticClass:"input"},[a("el-input",{attrs:{placeholder:"设备编号"},model:{value:e.deviceclazz,callback:function(t){e.deviceclazz=t},expression:"deviceclazz"}})],1),a("div",{staticClass:"search"},[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),a("div",{staticClass:"getall refresh"},[a("el-button",{attrs:{icon:"el-icon-document-copy"},on:{click:e.getAllDevice}},[e._v("获取全部设备 ")])],1),a("div",{staticClass:"import refresh"},[a("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("导入 ")])],1),a("div",{staticClass:"export refresh"},[a("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出 ")])],1)]),a("div",{staticClass:"oper-btns-right"},[a("el-button",{staticClass:"bigdel-btn",attrs:{icon:"el-icon-delete"},on:{click:e.delectAll}},[e._v("批量删除")])],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[a("el-upload",{ref:"upload",attrs:{drag:"",action:"http://47.102.214.37:8080/device/import",multiple:"","http-request":e.UpLoad,"auto-upload":!1,accept:".xlsx","on-preview":e.handlePreview}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传 xlsx 文件 ")])]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{border:"0",background:"#409eff",color:"#fff","font-weight":"bold"},on:{click:e.submitUpload}},[e._v("确认上传")])],1)],1)])],1),a("el-table",{ref:"multipleTable",staticClass:"tablestyle",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:"",height:"460",id:"outTable"},on:{"selection-change":e.handleDetailSelectionChange}},[a("el-table-column",{attrs:{type:"expand",width:"25"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"Demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._v(" 关键信息: "),a("el-form-item",{attrs:{label:"设备名称"}},[a("span",[e._v(e._s(t.row.name))])]),a("el-form-item",{attrs:{label:"设备品牌"}},[a("span",[e._v(e._s(t.row.brand))])]),a("el-form-item",{attrs:{label:"设备型号/规格"}},[a("span",[e._v(e._s(t.row.type))])]),a("el-form-item",{attrs:{label:"设备编号"}},[a("span",[e._v(e._s(t.row.deviceNo))])]),a("el-form-item",{attrs:{label:"是否为关键设备"}},[a("span",[e._v(e._s(t.row.crux))])]),a("el-form-item",{attrs:{label:"设备分类"}},[a("span",[e._v(e._s(t.row.clazz))])])],1)]}}])}),a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),a("el-table-column",{attrs:{prop:"name",label:"设备名称",width:"150"}}),a("el-table-column",{attrs:{prop:"brand",label:"设备品牌",width:"120"}}),a("el-table-column",{attrs:{prop:"type",label:"设备型号/规格",width:"150"}}),a("el-table-column",{attrs:{prop:"deviceNo",label:"设备编号",width:"150"}}),a("el-table-column",{attrs:{prop:"crux",label:"是否为关键设备",width:"150"}}),a("el-table-column",{attrs:{prop:"clazz",label:"设备分类",width:"120"}}),e._l(e.tableHead,(function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.lable,width:e.width}})]})),a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleCode(t.$index,t.row)}}},[e._v("编码")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"sizes,total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},Y=[],W=(a("3ca3"),a("ddb0"),a("2b3d"),{name:"DeviceInformation",components:{},data:function(){return{dialogVisible:!1,fileList:[],searchurl:"",exporturl:"",userRole:"",checkedDetail:[],tableHead:[],tableData:[],multipleSelection:[],currentPage:1,page:1,size:10,total:0,devicename:"",devicebrand:"",devicetype:"",deviceclazz:"",query:0,query_value:[]}},methods:{handleDetailSelectionChange:function(e){this.checkedDetail=e},search:function(){var e=this;if(e.query=0,""!=e.devicename&&e.query++,""!=e.devicebrand&&e.query++,""!=e.devicetype&&e.query++,""!=e.deviceclazz&&e.query++,0==e.query)e.$message({message:"请输入搜索信息",type:"warning"});else{switch(e.query_value=[],e.tableData=[],console.log(e.devicename),console.log(e.devicebrand),console.log(e.devicetype),console.log(e.deviceclazz),console.log(e.query),e.query){case 1:""!=e.devicename?(e.searchurl="http://47.102.214.37:8080/device/query?name=L"+e.devicename+"%25",e.exporturl="http://47.102.214.37:8080/device/query?name=L"+e.devicename+"%25"):""!=e.devicebrand?(e.searchurl="http://47.102.214.37:8080/device/query?brand=L"+e.devicebrand+"%25",e.exporturl="http://47.102.214.37:8080/device/export?name=L"+e.devicebrand+"%25"):""!=e.devicetype?(e.searchurl="http://47.102.214.37:8080/device/query?type=L"+e.devicetype.toUpperCase()+"%25",e.exporturl="http://47.102.214.37:8080/device/export?name=L"+e.devicetype.toUpperCase()+"%25"):""!=e.deviceclazz&&(e.searchurl="http://47.102.214.37:8080/device/query?clazz=L"+e.deviceclazz+"%25",e.exporturl="http://47.102.214.37:8080/device/export?name=L"+e.deviceclazz+"%25");break;case 2:""!=e.devicename&&e.query_value.push({name:"name",value:e.devicename}),""!=e.devicebrand&&e.query_value.push({name:"brand",value:e.devicebrand}),""!=e.devicetype&&e.query_value.push({name:"type",value:e.devicetype.toUpperCase()}),""!=e.deviceclazz&&e.query_value.push({name:"clazz",value:e.deviceclazz}),console.log(e.query_value),e.searchurl="http://47.102.214.37:8080/device/query?"+e.query_value[0].name+"=L"+e.query_value[0].value+"%25&"+e.query_value[1].name+"=L"+e.query_value[1].value+"%25",e.exporturl="http://47.102.214.37:8080/device/export?"+e.query_value[0].name+"=L"+e.query_value[0].value+"%25&"+e.query_value[1].name+"=L"+e.query_value[1].value+"%25";break;case 3:""!=e.devicename&&e.query_value.push({name:"name",value:e.devicename}),""!=e.devicebrand&&e.query_value.push({name:"brand",value:e.devicebrand}),""!=e.devicetype&&e.query_value.push({name:"type",value:e.devicetype.toUpperCase()}),""!=e.deviceclazz&&e.query_value.push({name:"clazz",value:e.deviceclazz}),console.log(e.query_value),e.searchurl="http://47.102.214.37:8080/device/query?"+e.query_value[0].name+"=L"+e.query_value[0].value+"%25&"+e.query_value[1].name+"=L"+e.query_value[1].value+"%25&"+e.query_value[2].name+"=L"+e.query_value[2].value+"%25",e.exporturl="http://47.102.214.37:8080/device/export?"+e.query_value[0].name+"=L"+e.query_value[0].value+"%25&"+e.query_value[1].name+"=L"+e.query_value[1].value+"%25&"+e.query_value[2].name+"=L"+e.query_value[2].value+"%25";break;case 4:e.searchurl="http://47.102.214.37:8080/device/query?name=="+e.devicename+"&brand=="+e.devicebrand+"&type=="+e.devicetype.toUpperCase()+"&clazz=="+e.deviceclazz,e.exporturl="http://47.102.214.37:8080/device/export?name=L"+e.devicename+"%25&brand=L"+e.devicebrand+"%25&type=L"+e.devicetype.toUpperCase()+"%25&clazz=L"+e.deviceclazz+"%25";break;default:break}console.log(e.searchurl),m.a.get(e.searchurl).then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++){var n={};if(n.id=t.data.content[a].id,n.name=t.data.content[a].name,n["brand"]=t.data.content[a].brand,n.type=t.data.content[a].type,n.deviceNo=t.data.content[a].deviceNo,0!=t.data.content[a].extra.length)for(var s=0;s<t.data.content[a].extra.length;s++)n[t.data.content[a].extra[s].field.id]=t.data.content[a].extra[s].value;1==t.data.content[a].crux?n.crux="Y":0==t.data.content[a].crux&&(n.crux="N"),n.clazz=t.data.content[a].clazz,e.tableData.push(n)}}))}},getAllDevice:function(){var e=this,t=this;m()({method:"GET",url:"http://47.102.214.37:8080/device?page=0&size=10"}).then((function(a){t.tableData=[],t.total=a.data.totalElements,t.currentPage=1;for(var n=0;n<a.data.content.length;n++){var s={};if(s.id=a.data.content[n].id,s.name=a.data.content[n].name,s["brand"]=a.data.content[n].brand,s.type=a.data.content[n].type,s.deviceNo=a.data.content[n].deviceNo,0!=a.data.content[n].extra.length)for(var o=0;o<a.data.content[n].extra.length;o++)s[a.data.content[n].extra[o].field.id]=a.data.content[n].extra[o].value;1==a.data.content[n].crux?s.crux="Y":0==a.data.content[n].crux&&(s.crux="N"),s.clazz=a.data.content[n].clazz,t.tableData.push(s)}e.$message({message:"已获取全部设备",type:"success"})})).catch((function(e){console.log(e)}))},handlePreview:function(e,t){console.log(e,t)},UpLoad:function(e){var t=this;console.log(e.file);var a=new FormData;a.append("file",e.file),console.log(a),m.a.post("http://47.102.214.37:8080/device/import",a).then((function(e){console.log(e),200==e.status&&(t.dialogVisible=!1,t.$message({message:"上传成功",type:"success"}),setTimeout((function(){t.getAllDevice()}),200))}))},submitUpload:function(){this.$refs.upload.submit()},exportExcel:function(){var e=this;""==e.devicename&&""==e.devicebrand&&""==e.devicetype&&""==e.deviceclazz&&(e.exporturl="http://47.102.214.37:8080/device/export?name=!"),m.a.get(e.exporturl,{responseType:"blob"}).then((function(e){if(console.log(e),e){var t=new Blob([e.data],{type:"application/vnd.ms-excel;charset=utf-8"}),a=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=a,n.setAttribute("download","data.xlsx"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a)}}))},delectAll:function(){var e=this,t=this;0==this.checkedDetail.length?t.$alert("请先选择要删除的数据","提示",{confirmButtonText:"确定"}):t.$confirm("删除后无法更改, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.checkedDetail.forEach((function(e){t.tableData.forEach((function(a,n){if(e.id==a.id){console.log(t.tableData[n]);var s="http://47.102.214.37:8080/device/"+t.tableData[n].id;m.a.delete(s).then((function(e){console.log(e)}))}}))})),setTimeout((function(){t.getAllDevice()}),200)})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleEdit:function(e,t){var a=this,n={};n.id=t.id,n.name=t.name,n.brand=t.brand,n.type=t.type,n.deviceNo=t.deviceNo,n.crux=t.crux,n.clazz=t.clazz,m.a.get("http://47.102.214.37:8080/device/info-field").then((function(e){console.log(e.data);for(var s=0;s<e.data.length;s++)n[e.data[s].id]=t[e.data[s].id];a.$router.push({path:"/editDevice",query:n})}))},handleCode:function(e,t){console.log(t),this.$router.push({path:"./code",query:t})},handleDelete:function(e){var t=this,a=this;this.$confirm("删除后无法更改, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="http://47.102.214.37:8080/device/"+a.tableData[e].id;m.a.delete(n).then((function(e){"ok"==e.data.message&&t.getAllDevice()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){var t=this;console.log(e),t.size=e;var a="http://47.102.214.37:8080/device?page=0&size="+t.size;console.log(a),m.a.get(a).then((function(e){console.log(e.data),t.tableData=[];for(var a=0;a<e.data.content.length;a++){var n={};if(n.id=e.data.content[a].id,n.name=e.data.content[a].name,n["brand"]=e.data.content[a].brand,n.type=e.data.content[a].type,n.deviceNo=e.data.content[a].deviceNo,0!=e.data.content[a].extra.length)for(var s=0;s<e.data.content[a].extra.length;s++)n[e.data.content[a].extra[s].field.id]=e.data.content[a].extra[s].value;1==e.data.content[a].crux?n.crux="Y":0==e.data.content[a].crux&&(n.crux="N"),n.clazz=e.data.content[a].clazz,t.tableData.push(n)}}))},handleCurrentChange:function(e){var t=this;t.page=e,t.currentPage=e,console.log(e);var a="http://47.102.214.37:8080/device?page="+(t.page-1)+"&size="+t.size;m.a.get(a).then((function(e){t.tableData=[];for(var a=0;a<e.data.content.length;a++){var n={};if(n.id=e.data.content[a].id,n.name=e.data.content[a].name,n["brand"]=e.data.content[a].brand,n.type=e.data.content[a].type,n.deviceNo=e.data.content[a].deviceNo,0!=e.data.content[a].extra.length)for(var s=0;s<e.data.content[a].extra.length;s++)n[e.data.content[a].extra[s].field.id]=e.data.content[a].extra[s].value;1==e.data.content[a].crux?n.crux="Y":0==e.data.content[a].crux&&(n.crux="N"),n.clazz=e.data.content[a].clazz,t.tableData.push(n)}}))}},created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){e.userRole=t.data.role})),setTimeout((function(){m.a.get("http://47.102.214.37:8080/device/info-field").then((function(t){for(var a=0;a<t.data.length;a++){var n={};n.lable=t.data[a].name,n.width="130",n.prop=t.data[a].id,e.tableHead.push(n)}})),m.a.get("http://47.102.214.37:8080/device?page=0&size=10").then((function(t){e.total=t.data.totalElements;for(var a=0;a<t.data.content.length;a++){var n={};if(n.id=t.data.content[a].id,n.name=t.data.content[a].name,n["brand"]=t.data.content[a].brand,n.type=t.data.content[a].type,n.deviceNo=t.data.content[a].deviceNo,0!=t.data.content[a].extra.length)for(var s=0;s<t.data.content[a].extra.length;s++)n[t.data.content[a].extra[s].field.id]=t.data.content[a].extra[s].value;1==t.data.content[a].crux?n.crux="Y":0==t.data.content[a].crux&&(n.crux="N"),n.clazz=t.data.content[a].clazz,e.tableData.push(n)}}))}),200)}}),H=W,G=(a("c000"),a("eae4"),Object(c["a"])(H,F,Y,!1,null,"6c8c0843",null)),J=G.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Main"},[a("el-breadcrumb",{staticClass:"BreadCrumb"},[a("el-breadcrumb-item",{staticClass:"left"},[e._v("设备管理")]),a("el-breadcrumb-item",{staticClass:"right"},[e._v("编辑设备")])],1),a("div",{staticClass:"AddDeviceInfo"},[a("div",{staticClass:"BaseInfo"},[a("div",{staticClass:"BaseInfoText"},[e._v("基本信息")]),a("div",{staticClass:"BaseInfoTable"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"设备名称: ","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"设备品牌: ","label-width":e.formLabelWidth,prop:"brand"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备品牌"},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),a("el-form-item",{attrs:{label:"设备型号/规格: ","label-width":e.formLabelWidth,prop:"type"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备型号/规格"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),a("el-form-item",{attrs:{label:"设备编号: ","label-width":e.formLabelWidth,prop:"deviceNo"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备编号"},model:{value:e.form.deviceNo,callback:function(t){e.$set(e.form,"deviceNo",t)},expression:"form.deviceNo"}})],1),a("el-form-item",{attrs:{label:"是否为关键设备:","label-width":e.formLabelWidth,prop:"crux"}},[a("el-radio-group",{model:{value:e.form.crux,callback:function(t){e.$set(e.form,"crux",t)},expression:"form.crux"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"设备分类: ","label-width":e.formLabelWidth,prop:"clazz"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入设备分类"},model:{value:e.form.clazz,callback:function(t){e.$set(e.form,"clazz",t)},expression:"form.clazz"}})],1)],1),a("div",{staticClass:"submitbtn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEditDevice(e.form)}}},[e._v("确认修改")])],1)],1)]),a("div",{staticClass:"ExtraInfo"},[a("div",{staticClass:"ExtraInfoText"},[e._v("拓展信息")]),a("div",{staticClass:"Btns"},[a("el-button",{staticClass:"AddBtn",attrs:{icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增字段")]),a("el-button",{staticClass:"DelBtn",attrs:{icon:"el-icon-delete"},on:{click:e.delectExtraInfo}},[e._v("删除字段")])],1),a("el-dialog",{staticClass:"addExtraInfoDialog",attrs:{title:"新增字段",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.ExtraInfoDialog}},[a("el-form-item",{attrs:{label:"字段名称: ","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入字段名称"},model:{value:e.ExtraInfoDialog.name,callback:function(t){e.$set(e.ExtraInfoDialog,"name",t)},expression:"ExtraInfoDialog.name"}})],1),a("el-form-item",{attrs:{label:"字段类型: ","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择字段类型"},model:{value:e.ExtraInfoDialog.type,callback:function(t){e.$set(e.ExtraInfoDialog,"type",t)},expression:"ExtraInfoDialog.type"}},[a("el-option",{attrs:{label:"String (字符串型)",value:"String"}}),a("el-option",{attrs:{label:"Date (日期型)",value:"Date"}}),a("el-option",{attrs:{label:"Integer (数字型)",value:"Integer"}}),a("el-option",{attrs:{label:"Bool (布尔型)",value:"Bool"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.SubmitNewExtraInfo(e.ExtraInfoDialog)}}},[e._v("确 定")])],1)],1),a("el-table",{ref:"multipleTable",staticClass:"extraTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleDetailSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"extraname",label:"字段名"}}),a("el-table-column",{attrs:{label:"字段信息"},scopedSlots:e._u([{key:"default",fn:function(t){return["String"==t.row.type?a("el-input",{attrs:{placeholder:"请输入字段信息"},model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}}):e._e(),"Integer"==t.row.type?a("el-input",{attrs:{type:"number",placeholder:"请输入字段信息"},model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}}):e._e(),"Date"==t.row.type?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"large","value-format":"yyyy-MM-dd"},model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}}):e._e(),"Bool"==t.row.type?a("el-radio-group",{model:{value:t.row.extrainfo,callback:function(a){e.$set(t.row,"extrainfo",a)},expression:"scope.row.extrainfo"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1):e._e()]}}])})],1),a("div",{staticClass:"ExtraInfoTable"})],1)])],1)},X=[],Q={data:function(){return{form:{name:"",brand:"",type:"",deviceNo:"",crux:"",clazz:""},formLabelWidth:"150px",dialogFormVisible:!1,ExtraInfoDialog:{},tableData:[],extraid:[],checkedDetail:[],rules:{name:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],brand:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],type:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],deviceNo:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],crux:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}],clazz:[{required:!0,message:"必填字段不能为空！",trigger:"blur"}]}}},methods:{handleDetailSelectionChange:function(e){this.checkedDetail=e},SubmitNewExtraInfo:function(e){var t=this;m.a.post("http://47.102.214.37:8080/device/info-field",{name:e.name,type:e.type}).then((function(a){201==a.status&&(t.tableData.push({extraname:e.name,extrainfo:""}),m.a.get("http://47.102.214.37:8080/device/info-field").then((function(a){for(var n=0;n<a.data.length;n++)if(a.data[n].name==e.name){t.extraid.push(a.data[n].id);break}})),t.dialogFormVisible=!1)}))},delectExtraInfo:function(){var e=this,t=this;0==this.checkedDetail.length?t.$alert("请先选择要删除的数据","提示",{confirmButtonText:"确定"}):t.$confirm("删除后无法更改, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(t.checkedDetail),t.checkedDetail.forEach((function(a){t.tableData.forEach((function(n,s){if(console.log(a,n),a.extraname==n.extraname){console.log(t.tableData[s]);var o="http://47.102.214.37:8080/device/info-field/"+t.extraid[s];m.a.delete(o).then((function(a){console.log(a),200==a.status?(t.tableData.splice(s,1),e.$message({message:"删除成功",type:"success"})):e.$message.error("删除失败")}))}}))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},submitEditDevice:function(e){var t=this,a=this;if(console.log(e),void 0==e.name||void 0==e.brand||void 0==e.type||void 0==e.deviceNo||void 0==e.crux||void 0==e.clazz)this.$alert("请将基本信息填写完整！","提示",{confirmButtonText:"确定"});else{var n={};"Y"==e.crux?n.crux=!0:"N"==e.crux&&(n.crux=!1);for(var s=[],o=0;o<a.tableData.length;o++)s.push({field:{id:a.extraid[o]},value:a.tableData[o].extrainfo});m.a.put("http://47.102.214.37:8080/device",{id:this.$route.query.id,name:e.name,brand:e.brand,type:e.type,deviceNo:e.deviceNo,crux:n.crux,clazz:e.clazz,extra:s}).then((function(e){console.log(e),200==e.status&&(t.$message({message:"修改成功",type:"success"}),t.$router.push("/deviceInformation"))})).catch((function(e){console.log(e)}))}}},created:function(){var e=this;console.log(this.$route.query);var t=this;t.form.name=this.$route.query.name,t.form.brand=this.$route.query.brand,t.form.type=this.$route.query.type,t.form.deviceNo=this.$route.query.deviceNo,t.form.crux=this.$route.query.crux,t.form.clazz=this.$route.query.clazz,m.a.get("http://47.102.214.37:8080/device/info-field").then((function(a){console.log(a.data);for(var n=0;n<a.data.length;n++)t.extraid.push(a.data[n].id),t.tableData.push({extraname:a.data[n].name,extrainfo:e.$route.query[a.data[n].id],type:a.data[n].type})}))}},Z=Q,ee=(a("7ef6"),Object(c["a"])(Z,K,X,!1,null,null,null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-breadcrumb",{staticClass:"breadcrumb-top",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备管理")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("生成编码")])],1),void 0!=e.url?a("div",{staticClass:"codeimage"},[a("img",{attrs:{src:e.url}})]):e._e()],1)},ne=[],se={data:function(){return{url:void 0}},methods:{},created:function(){console.log(this.$route.query),this.url="http://47.102.214.37:8080/device/barcode/"+this.$route.query.id}},oe=se,ie=(a("2779"),Object(c["a"])(oe,ae,ne,!1,null,null,null)),le=ie.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return["ROOT","ADMIN","CREATOR"].includes(e.userRole)?a("div",{staticClass:"Container-AddTask"},[a("div",{staticClass:"add",on:{click:e.addNewTask}},[e._m(0)]),e._l(e.taskData,(function(t,n){return a("div",{key:n,staticClass:"card"},[a("div",{staticClass:"content"},[a("h2",[e._v(e._s(t.taskname))]),a("div",{staticClass:"Btns"},[a("el-button",{staticClass:"btn btn1",on:{click:function(t){return e.showInfo(n)}}},[e._v("以此为模版新增")]),a("el-button",{staticClass:"btn btn2",on:{click:function(t){return e.editTask(n)}}},[e._v("编辑任务")]),a("el-button",{staticClass:"btn btn3",on:{click:function(t){return e.deleteTask(n)}}},[e._v("删除任务")])],1)])])}))],2):e._e()},re=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h2",{staticStyle:{"font-size":"5em"}},[e._v("+")])])}],de={name:"AddTask",created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){e.userRole=t.data.role})),setTimeout((function(){m.a.get("http://47.102.214.37:8080/ops/schedule?page=0&size=100").then((function(t){for(var a=0;a<t.data.content.length;a++)e.taskData.push({taskID:t.data.content[a].id,taskname:t.data.content[a].name})}))}),300)},data:function(){return{userRole:"",dialogVisible:!1,devicename:"",deviceclazz:"",taskData:[]}},methods:{addNewTask:function(){this.$router.push({path:"/addTaskInside"})},showInfo:function(e){this.$router.push({path:"/addTaskInside",query:this.taskData[e]})},editTask:function(e){this.$router.push({path:"/editTask",query:this.taskData[e]})},deleteTask:function(e){var t=this,a=this;a.$confirm("这个是模版，所有继承它的维护任务也会被删除, \n是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="http://47.102.214.37:8080/ops/schedule/"+a.taskData[e].taskID;m.a.delete(n).then((function(n){200==n.status&&(a.taskData.splice(e,1),t.$message({message:"删除成功",type:"success"}))}))})).catch((function(){a.$message.info("已取消删除")}))}}},ue=de,fe=(a("a86b"),Object(c["a"])(ue,ce,re,!1,null,null,null)),pe=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-AddTaskInside"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备保养")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("新增任务")])],1),a("div",{staticClass:"Task-container"},[a("div",{staticClass:"Task-box"},[a("el-form",{ref:"form",attrs:{model:e.TaskInfo,"label-position":"left"}},[a("div",{staticClass:"part"},[a("div",{staticClass:"part_left"},[a("div",{staticClass:"part_left_0 part_left_1"},[a("el-form-item",{staticClass:"task tasktime",attrs:{label:"保养周期"}},[a("el-select",{staticClass:"TaskTime-select",attrs:{clearable:"",placeholder:"请选择保养周期"},model:{value:e.TaskInfo.scheduleType,callback:function(t){e.$set(e.TaskInfo,"scheduleType",t)},expression:"TaskInfo.scheduleType"}},e._l(e.tasktime,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"task taskname",attrs:{label:"任务名称"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:e.TaskInfo.name,callback:function(t){e.$set(e.TaskInfo,"name",t)},expression:"TaskInfo.name"}})],1)],1),a("div",{staticClass:"part_left_0 part_left_2"},[a("el-form-item",{staticClass:"task side",attrs:{label:"保养部位"}},[a("el-input",{attrs:{placeholder:"请输入保养部位"},model:{value:e.TaskInfo.side,callback:function(t){e.$set(e.TaskInfo,"side",t)},expression:"TaskInfo.side"}})],1),a("el-form-item",{staticClass:"task acceptedStandard",attrs:{label:"接受标准"}},[a("el-input",{attrs:{placeholder:"请输入接受标准"},model:{value:e.TaskInfo.acceptedStandard,callback:function(t){e.$set(e.TaskInfo,"acceptedStandard",t)},expression:"TaskInfo.acceptedStandard"}})],1)],1),a("div",{staticClass:"part_left_0 part_left_3"},[a("el-form-item",{staticClass:"task tools",attrs:{label:"保养工具及备件"}},[a("el-input",{staticClass:"inputStyle",attrs:{type:"textarea",rows:8},model:{value:e.TaskInfo.tools,callback:function(t){e.$set(e.TaskInfo,"tools",t)},expression:"TaskInfo.tools"}})],1),a("el-form-item",{staticClass:"task remark",attrs:{label:"注意事项"}},[a("el-input",{staticClass:"inputStyle",attrs:{type:"textarea",rows:8},model:{value:e.TaskInfo.remark,callback:function(t){e.$set(e.TaskInfo,"remark",t)},expression:"TaskInfo.remark"}})],1)],1)]),a("div",{staticClass:"part_right"},[a("el-form-item",{attrs:{label:"保养内容"}},[a("i",{staticClass:"el-icon-circle-plus-outline addicon",on:{click:function(t){e.addcontent=!0}}}),a("div",{staticStyle:{"margin-top":"0px"}},e._l(e.TaskInfo.content,(function(t,n){return a("el-collapse",{key:n,on:{change:e.handleChange}},[a("el-collapse-item",{attrs:{title:t.title,name:n}},[e._v(" "+e._s(t.detail)+" ")])],1)})),1)])],1)]),a("div",{staticClass:"Btns"},[a("div",{staticClass:"sub-btn"},[a("el-button",{on:{click:e.submittask}},[e._v("保存并提交")])],1),a("div",{staticClass:"cancel-btn"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])])],1)]),a("el-dialog",{attrs:{title:"新增保养内容",visible:e.addcontent,width:"400px"},on:{"update:visible":function(t){e.addcontent=t}}},[a("el-form",{attrs:{model:e.TaskInfo}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.TaskInfo.title,callback:function(t){e.$set(e.TaskInfo,"title",t)},expression:"TaskInfo.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8}},model:{value:e.TaskInfo.detail,callback:function(t){e.$set(e.TaskInfo,"detail",t)},expression:"TaskInfo.detail"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addcontent=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitcontent}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改保养内容",visible:e.fixcontent,width:"400px"},on:{"update:visible":function(t){e.fixcontent=t}}},[a("el-form",{attrs:{model:e.TaskInfo}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.TaskInfo.title,callback:function(t){e.$set(e.TaskInfo,"title",t)},expression:"TaskInfo.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8}},model:{value:e.TaskInfo.detail,callback:function(t){e.$set(e.TaskInfo,"detail",t)},expression:"TaskInfo.detail"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.fixcontent=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitfix}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"功能选择",visible:e.confirmfunction,width:"350px",center:""},on:{"update:visible":function(t){e.confirmfunction=t}}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmfunction=!1}}},[e._v("仅查看")]),a("el-button",{attrs:{type:"warning"},on:{click:e.editcontent}},[e._v("修改内容")]),a("el-button",{attrs:{type:"danger"},on:{click:e.deletecontent}},[e._v("删除内容")])],1)],1)},me=[],he={name:"AddTaskInside",created:function(){var e=this;if(void 0!=this.$route.query.taskID){console.log(this.$route.query);var t="http://47.102.214.37:8080/ops/schedule/detail/"+this.$route.query.taskID;m.a.get(t).then((function(t){console.log(t.data),e.TaskInfo.scheduleType=t.data.scheduleType,e.TaskInfo.name=t.data.name,e.TaskInfo.side=t.data.side,e.TaskInfo.acceptedStandard=t.data.acceptedStandard,e.TaskInfo.tools=t.data.tools,e.TaskInfo.remark=t.data.remark,e.TaskInfo.content=t.data.content}))}else console.log("bbb")},data:function(){return{TaskInfo:{scheduleType:"",name:"",side:"",acceptedStandard:"",tools:"",remark:"",title:"",detail:"",content:[]},tasktime:[{value:"Predictability",label:"未知"},{value:"Yearly",label:"每年"},{value:"Seasonally",label:"每季度"},{value:"Monthly",label:"每月"},{value:"Weekly",label:"每周"},{value:"Daily",label:"每天"}],addcontent:!1,fixcontent:!1,confirmfunction:!1,contentindex:-1}},methods:{handleChange:function(e){console.log(this.TaskInfo.content[e]),void 0!=this.TaskInfo.content[e]&&(this.confirmfunction=!0),this.contentindex=e},editcontent:function(){console.log(this.TaskInfo.content[this.contentindex]),this.TaskInfo.title=this.TaskInfo.content[this.contentindex].title,this.TaskInfo.detail=this.TaskInfo.content[this.contentindex].detail,this.fixcontent=!0},submitfix:function(){this.TaskInfo.content.splice(this.contentindex,1,{title:this.TaskInfo.title,detail:this.TaskInfo.detail}),this.fixcontent=!1,this.confirmfunction=!1,this.$message({message:"修改成功",type:"success"})},deletecontent:function(){var e=this;console.log(this.TaskInfo.content[this.contentindex]),this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.TaskInfo.content.splice(e.contentindex,1),e.confirmfunction=!1})).catch((function(){e.$message.info("已取消删除")}))},submitcontent:function(){this.addcontent=!1,this.TaskInfo.content.push({title:this.TaskInfo.title,detail:this.TaskInfo.detail}),console.log(this.TaskInfo)},submittask:function(){var e=this,t={};""==e.TaskInfo.scheduleType||""==e.TaskInfo.name||""==e.TaskInfo.side||""==e.TaskInfo.acceptedStandard||""==e.TaskInfo.tools||""==e.TaskInfo.remark||0==e.TaskInfo.content.length?e.$message({message:"请将信息填写完整",type:"warning"}):(t.scheduleType=e.TaskInfo.scheduleType,t.name=e.TaskInfo.name,t.side=e.TaskInfo.side,t.acceptedStandard=e.TaskInfo.acceptedStandard,t.tools=e.TaskInfo.tools,t.remark=e.TaskInfo.remark,t.content=e.TaskInfo.content,m.a.post("http://47.102.214.37:8080/ops/schedule",t).then((function(t){console.log(t),e.$message({message:"新增成功",type:"success"})})).catch((function(e){console.log(e.response.data.message)}))),console.log(t)},cancel:function(){this.$router.push({path:"/addTask"})}}},be=he,ge=(a("d590"),Object(c["a"])(be,ve,me,!1,null,null,null)),ke=ge.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-EditTask"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备保养")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("编辑模版")])],1),a("div",{staticClass:"Task-container"},[a("div",{staticClass:"Task-box"},[a("el-form",{ref:"form",attrs:{model:e.TaskInfo,"label-position":"left"}},[a("div",{staticClass:"part"},[a("div",{staticClass:"part_left"},[a("div",{staticClass:"part_left_0 part_left_1"},[a("el-form-item",{staticClass:"task tasktime",attrs:{label:"保养周期"}},[a("el-select",{staticClass:"TaskTime-select",attrs:{clearable:"",placeholder:"请选择保养周期"},model:{value:e.TaskInfo.scheduleType,callback:function(t){e.$set(e.TaskInfo,"scheduleType",t)},expression:"TaskInfo.scheduleType"}},e._l(e.tasktime,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"task taskname",attrs:{label:"任务名称"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:e.TaskInfo.name,callback:function(t){e.$set(e.TaskInfo,"name",t)},expression:"TaskInfo.name"}})],1)],1),a("div",{staticClass:"part_left_0 part_left_2"},[a("el-form-item",{staticClass:"task side",attrs:{label:"保养部位"}},[a("el-input",{attrs:{placeholder:"请输入保养部位"},model:{value:e.TaskInfo.side,callback:function(t){e.$set(e.TaskInfo,"side",t)},expression:"TaskInfo.side"}})],1),a("el-form-item",{staticClass:"task acceptedStandard",attrs:{label:"接受标准"}},[a("el-input",{attrs:{placeholder:"请输入接受标准"},model:{value:e.TaskInfo.acceptedStandard,callback:function(t){e.$set(e.TaskInfo,"acceptedStandard",t)},expression:"TaskInfo.acceptedStandard"}})],1)],1),a("div",{staticClass:"part_left_0 part_left_3"},[a("el-form-item",{staticClass:"task tools",attrs:{label:"保养工具及备件"}},[a("el-input",{staticClass:"inputStyle",attrs:{type:"textarea",rows:8},model:{value:e.TaskInfo.tools,callback:function(t){e.$set(e.TaskInfo,"tools",t)},expression:"TaskInfo.tools"}})],1),a("el-form-item",{staticClass:"task remark",attrs:{label:"注意事项"}},[a("el-input",{staticClass:"inputStyle",attrs:{type:"textarea",rows:8},model:{value:e.TaskInfo.remark,callback:function(t){e.$set(e.TaskInfo,"remark",t)},expression:"TaskInfo.remark"}})],1)],1)]),a("div",{staticClass:"part_right"},[a("el-form-item",{attrs:{label:"保养内容"}},[a("i",{staticClass:"el-icon-circle-plus-outline addicon",on:{click:function(t){e.addcontent=!0}}}),a("div",{staticStyle:{"margin-top":"0px"}},e._l(e.TaskInfo.content,(function(t,n){return a("el-collapse",{key:n,on:{change:e.handleChange}},[a("el-collapse-item",{attrs:{title:t.title,name:n}},[e._v(" "+e._s(t.detail)+" ")])],1)})),1)])],1)]),a("div",{staticClass:"Btns"},[a("div",{staticClass:"sub-btn"},[a("el-button",{on:{click:e.submittask}},[e._v("保存并提交")])],1),a("div",{staticClass:"cancel-btn"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])])],1)]),a("el-dialog",{attrs:{title:"新增保养内容",visible:e.addcontent,width:"400px"},on:{"update:visible":function(t){e.addcontent=t}}},[a("el-form",{attrs:{model:e.TaskInfo}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.TaskInfo.title,callback:function(t){e.$set(e.TaskInfo,"title",t)},expression:"TaskInfo.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8}},model:{value:e.TaskInfo.detail,callback:function(t){e.$set(e.TaskInfo,"detail",t)},expression:"TaskInfo.detail"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addcontent=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitcontent}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改保养内容",visible:e.fixcontent,width:"400px"},on:{"update:visible":function(t){e.fixcontent=t}}},[a("el-form",{attrs:{model:e.TaskInfo}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.TaskInfo.title,callback:function(t){e.$set(e.TaskInfo,"title",t)},expression:"TaskInfo.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8}},model:{value:e.TaskInfo.detail,callback:function(t){e.$set(e.TaskInfo,"detail",t)},expression:"TaskInfo.detail"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.fixcontent=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitfix}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"功能选择",visible:e.confirmfunction,width:"350px",center:""},on:{"update:visible":function(t){e.confirmfunction=t}}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmfunction=!1}}},[e._v("仅查看")]),a("el-button",{attrs:{type:"warning"},on:{click:e.editcontent}},[e._v("修改内容")]),a("el-button",{attrs:{type:"danger"},on:{click:e.deletecontent}},[e._v("删除内容")])],1)],1)},xe=[],_e={created:function(){var e=this;if(console.log(this.$route.query),void 0!=this.$route.query.taskID){var t="http://47.102.214.37:8080/ops/schedule/detail/"+this.$route.query.taskID;m.a.get(t).then((function(t){console.log(t.data),e.TaskInfo.scheduleType=t.data.scheduleType,e.TaskInfo.name=t.data.name,e.TaskInfo.side=t.data.side,e.TaskInfo.acceptedStandard=t.data.acceptedStandard,e.TaskInfo.tools=t.data.tools,e.TaskInfo.remark=t.data.remark,e.TaskInfo.content=t.data.content,e.collapseinfo=t.data.content}))}else console.log("bbb")},data:function(){return{TaskInfo:{scheduleType:"",name:"",side:"",acceptedStandard:"",tools:"",remark:"",title:"",detail:"",content:[]},collapseinfo:[],tasktime:[{value:"Predictability",label:"未知"},{value:"Yearly",label:"每年"},{value:"Seasonally",label:"每季度"},{value:"Monthly",label:"每月"},{value:"Weekly",label:"每周"},{value:"Daily",label:"每天"}],addcontent:!1,fixcontent:!1,confirmfunction:!1,contentindex:-1,contentid:-1}},methods:{handleChange:function(e){void 0!=this.TaskInfo.content[e]&&(this.confirmfunction=!0),this.contentindex=e},editcontent:function(){console.log(this.TaskInfo.content[this.contentindex]),this.contentid=this.TaskInfo.content[this.contentindex].id,this.TaskInfo.title=this.TaskInfo.content[this.contentindex].title,this.TaskInfo.detail=this.TaskInfo.content[this.contentindex].detail,this.fixcontent=!0},submitfix:function(){this.TaskInfo.content.splice(this.contentindex,1,{title:this.TaskInfo.title,detail:this.TaskInfo.detail,id:this.contentid}),this.fixcontent=!1,this.confirmfunction=!1,this.$message({message:"修改成功",type:"success"})},deletecontent:function(){var e=this;console.log(this.TaskInfo.content[this.contentindex]),this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.TaskInfo.content.splice(e.contentindex,1),e.confirmfunction=!1})).catch((function(){e.$message.info("已取消删除")}))},submitcontent:function(){this.dialogFormVisible=!1,this.TaskInfo.content.push({title:this.TaskInfo.title,detail:this.TaskInfo.detail}),this.collapseinfo=this.TaskInfo.content},submittask:function(){var e=this,t={};if(""==e.TaskInfo.scheduleType||""==e.TaskInfo.name||""==e.TaskInfo.side||""==e.TaskInfo.acceptedStandard||""==e.TaskInfo.tools||""==e.TaskInfo.remark||0==e.TaskInfo.content.length)e.$message({message:"请将信息填写完整",type:"warning"});else{var a="http://47.102.214.37:8080/ops/schedule/detail/"+e.$route.query.taskID;m.a.get(a).then((function(t){console.log(t.data);for(var n={},s=[],o=0;o<e.TaskInfo.content.length;o++)s.push({id:e.TaskInfo.content[o].id,detail:e.TaskInfo.content[o].detail,title:e.TaskInfo.content[o].title});n.acceptedStandard=e.TaskInfo.acceptedStandard,n.content=s,n.id=t.data.id,n.name=e.TaskInfo.name,n.remark=e.TaskInfo.remark,n.startDate=t.data.startDate,n.scheduleType=e.TaskInfo.scheduleType,n.side=e.TaskInfo.side,n.tools=e.TaskInfo.tools,n.device=t.data.device,n.ops=t.data.ops,console.log(n),setTimeout((function(){m.a.put(a,n).then((function(t){console.log(t),e.$message({message:"编辑成功",type:"success"})}))}),200)}))}console.log(t)},cancel:function(){this.$router.push({path:"/addTask"})}}},Ce=_e,Te=(a("2f03"),Object(c["a"])(Ce,ye,xe,!1,null,null,null)),Ie=Te.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-TaskInfomation"},[a("div",{staticClass:"calendar"},[a("FullCalendar",{ref:"fullCalendar",staticClass:"demo-app-calendar",attrs:{options:e.calendarOptions},on:{changeMonth:e.changeMonth}})],1),a("el-dialog",{attrs:{title:"选择任务",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},we=[],$e=a("f5ff"),ze=a("3cdd"),Se=a("a20c"),Ee=a("3e32"),qe=a("e44e"),Re={name:"DeviceInformation",components:{FullCalendar:$e["a"]},mounted:function(){this.calendarApi=this.$refs.fullCalendar.getApi()},created:function(){var e=this;e.thismonth=(new Date).getMonth()+1,e.thisyear=(new Date).getFullYear();var t="http://47.102.214.37:8080/ops/dates/"+(new Date).getFullYear()+"/"+((new Date).getMonth()+1);m.a.get(t).then((function(t){console.log(t);for(var a=0;a<t.data.length;a++)e.calendarOptions.events.push({id:t.data[a].schedule.id,title:t.data[a].schedule.name,start:t.data[a].date,backgroundColor:"#409eff",borderColor:"#409eff",textColor:"#fff"})})),m.a.get("http://47.102.214.37:8080/ops/schedule?page=0&size=10").then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++)e.options.push({label:t.data.content[a].name,value:t.data.content[a].id})}))},data:function(){var e=this;return{thismonth:null,thisyear:null,calendarApi:null,calendarOptions:{plugins:[ze["b"],Ee["a"],Se["a"],qe["a"]],headerToolbar:{left:"prevYear nextYear",center:"title"},buttonText:{today:"今天",month:"月"},events:[],initialView:"dayGridMonth",editable:!0,weekends:!0,dayMaxEvents:!0,navLinks:!0,eventClick:this.handleEventClick,dateClick:this.handleDateClick,locale:"zh-cn",height:"100%",customButtons:{prev:{text:"PREV",click:function(){e.calendarApi.prev();var t=e;t.thismonth--,t.calendarOptions.events=[];var a="http://47.102.214.37:8080/ops/dates/"+t.thisyear+"/"+t.thismonth;m.a.get(a).then((function(e){console.log(e);for(var a=0;a<e.data.length;a++)t.calendarOptions.events.push({id:e.data[a].schedule.id,title:e.data[a].schedule.name,start:e.data[a].date,backgroundColor:"#409eff",borderColor:"#409eff",textColor:"#fff"})}))}},next:{text:"NEXT",click:function(){e.calendarApi.next();var t=e;t.thismonth++,t.calendarOptions.events=[];var a="http://47.102.214.37:8080/ops/dates/"+t.thisyear+"/"+t.thismonth;m.a.get(a).then((function(e){console.log(e);for(var a=0;a<e.data.length;a++)t.calendarOptions.events.push({id:e.data[a].schedule.id,title:e.data[a].schedule.name,start:e.data[a].date,backgroundColor:"#409eff",borderColor:"#409eff",textColor:"#fff"})}))}},today:{text:"今天",click:function(){e.calendarApi.today();var t=e;t.thismonth=(new Date).getMonth()+1,t.thisyear=(new Date).getFullYear(),t.calendarOptions.events=[];var a="http://47.102.214.37:8080/ops/dates/"+t.thisyear+"/"+t.thismonth;m.a.get(a).then((function(e){console.log(e);for(var a=0;a<e.data.length;a++)t.calendarOptions.events.push({id:e.data[a].schedule.id,title:e.data[a].schedule.name,start:e.data[a].date,backgroundColor:"#409eff",borderColor:"#409eff",textColor:"#fff"})}))}},prevYear:{click:function(){e.calendarApi.prevYear();var t=e;t.thisyear--,t.calendarOptions.events=[],console.log(t.thisyear);var a="http://47.102.214.37:8080/ops/dates/"+t.thisyear+"/"+t.thismonth;m.a.get(a).then((function(e){console.log(e);for(var a=0;a<e.data.length;a++)t.calendarOptions.events.push({id:e.data[a].schedule.id,title:e.data[a].schedule.name,start:e.data[a].date,backgroundColor:"#409eff",borderColor:"#409eff",textColor:"#fff"})}))}},nextYear:{click:function(){e.calendarApi.nextYear();var t=e;t.thisyear++,t.calendarOptions.events=[],console.log(t.thisyear);var a="http://47.102.214.37:8080/ops/dates/"+t.thisyear+"/"+t.thismonth;m.a.get(a).then((function(e){console.log(e);for(var a=0;a<e.data.length;a++)t.calendarOptions.events.push({id:e.data[a].schedule.id,title:e.data[a].schedule.name,start:e.data[a].date,backgroundColor:"#409eff",borderColor:"#409eff",textColor:"#fff"})}))}}}},currentEvents:[],userRole:"",userID:"",dialogFormVisible:!1,options:[],value1:[],clickdate:""}},methods:{handleEventClick:function(e){var t={id:e.event.id};this.$router.push({path:"./taskDetailInfo",query:t})},handleDateClick:function(e){e.date.getMonth()+1<10?this.clickdate=e.date.getFullYear()+"-0"+(e.date.getMonth()+1)+"-"+e.date.getDate():this.clickdate=e.date.getFullYear()+"-"+(e.date.getMonth()+1)+"-"+e.date.getDate(),this.dialogFormVisible=!0},changeMonth:function(e,t,a){console.log("changeMonth",e.format(),t.format(),a.format())},submit:function(){var e=this;this.dialogFormVisible=!1;for(var t=function(){var t="http://47.102.214.37:8080/ops/schedule/detail/"+e.value1[a];console.log(t),m.a.get(t).then((function(a){console.log(a.data);var n={};n.acceptedStandard=a.data.acceptedStandard,n.content=a.data.content,n.id=a.data.id,n.name=a.data.name,n.remark=a.data.remark,n.scheduleType=a.data.scheduleType,n.startDate=e.clickdate,n.side=a.data.side,n.tools=a.data.tools,n.device=a.data.device,n.ops=a.data.ops,n.manager=a.data.manager,console.log(n),setTimeout((function(){m.a.put(t,n).then((function(t){console.log(t),e.$message({message:"分配成功",type:"success"})}))}),200)}))},a=0;a<e.value1.length;a++)t()}}},Oe=Re,Ne=(a("ce46"),Object(c["a"])(Oe,De,we,!1,null,null,null)),Ae=Ne.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-TaskDetailInfo"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备保养")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("任务名称："+e._s(e.name)+" ")])],1),a("div",{staticClass:"Task-container"},[a("div",{staticClass:"Task-info"},[a("div",{staticClass:"Users"},[a("div",{staticClass:"part0",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("维护人员")]),e._l(e.users,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.usersName)+" ")])}))],2)]),a("div",{staticClass:"Side-Standard"},[a("div",{staticClass:"part1",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("任务名称")]),a("div",{staticClass:"Info"},[e._v(e._s(e.name))])]),a("div",{staticClass:"part1 Side",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("保养部位")]),a("div",{staticClass:"Info"},[e._v(e._s(e.side))])]),a("div",{staticClass:"part1 Standard"},[a("div",{staticClass:"Text"},[e._v("接受标准")]),a("div",{staticClass:"Info"},[e._v(e._s(e.acceptedStandard))])])]),a("div",{staticClass:"Name-Clazz-Time"},[a("div",{staticClass:"part2 Name",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("设备名称")]),e._l(e.deviceinfo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceName)+" ")])}))],2),a("div",{staticClass:"part2 Clazz",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("设备类别")]),e._l(e.deviceinfo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceClazz)+" ")])}))],2),a("div",{staticClass:"part2 Time"},[a("div",{staticClass:"Text"},[e._v("保养周期")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.scheduleType)),a("span",[e._v("（每"+e._s(e.scheduleType_info)+"）")])])])]),a("div",{staticClass:"Content-Tools-Attention"},[a("div",{staticClass:"part3 Content",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("保养内容")]),e._l(e.content,(function(t,n){return a("div",{key:n,staticClass:"Info contentInfo"},[a("div",{staticStyle:{"font-size":"18px","font-weight":"bold"}},[a("span",{staticStyle:{"font-size":"15px","font-weight":"bolder",color:"#409eff"}},[e._v("|")]),e._v(" "+e._s(t.contentinfotitle)+" ")]),a("div",{staticStyle:{"font-size":"13px"}},[e._v(e._s(t.contentinfotext))])])}))],2),a("div",{staticClass:"part3 Tools",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("保养工具及备件")]),e._l(e.tools,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.toolsinfo)+" ")])}))],2),a("div",{staticClass:"part3 Attention"},[a("div",{staticClass:"Text"},[e._v("注意事项")]),a("div",{staticClass:"Info"},[e._v(e._s(e.remark))])])])])])],1)},Le=[],Me={created:function(){var e=this;e.taskid=e.$route.query.id;var t="http://47.102.214.37:8080/ops/schedule/detail/"+e.$route.query.id;m.a.get(t).then((function(t){if(console.log(t.data),e.name=t.data.name,null==e.scheduleType&&(e.scheduleType=t.data.scheduleType),null==e.scheduleDay&&(e.scheduleDay=t.data.scheduleDay),"Daily"==e.scheduleType&&(e.scheduleType_info="天"),"Weekly"==e.scheduleType)switch(e.scheduleDay){case 1:e.scheduleType_info="周一";break;case 2:e.scheduleType_info="周二";break;case 3:e.scheduleType_info="周三";break;case 4:e.scheduleType_info="周四";break;case 5:e.scheduleType_info="周五";break;case 6:e.scheduleType_info="周六";break;case 7:e.scheduleType_info="周日";break;default:break}else"Monthly"==e.scheduleType?e.scheduleType_info="月"+e.scheduleDay+"号":"Yearly"==e.scheduleType&&(e.scheduleType_info="年第"+e.scheduleDay+"天");if(null==e.side&&(e.side=t.data.side),null==e.acceptedStandard&&(e.acceptedStandard=t.data.acceptedStandard),""!=t.data.content)for(var a=0;a<t.data.content.length;a++)e.content.push({contentinfotitle:t.data.content[a].title,contentinfotext:t.data.content[a].detail});if(""!=t.data.tools)for(var n=0;n<t.data.content.length;n++)e.tools.push({toolsinfo:t.data.tools[n]});""!=t.data.remark&&(e.remark=t.data.remark);for(var s=0;s<t.data.device.length;s++){var o="http://47.102.214.37:8080/device/"+t.data.device[s].id;m.a.get(o).then((function(t){e.deviceinfo.push({deviceName:t.data.name,deviceClazz:t.data.clazz})}))}for(var i=0;i<t.data.ops.length;i++){var l="http://47.102.214.37:8080/user/query?id=="+t.data.ops[i].id;m.a.get(l).then((function(t){console.log(t.data.content[0]),e.users.push({usersName:t.data.content[0].name+"（ id："+t.data.content[0].id+" ）"})}))}}))},data:function(){return{taskid:"",users:[],name:null,side:null,acceptedStandard:null,deviceinfo:[],scheduleType:null,scheduleDay:null,scheduleType_info:null,content:[],tools:[],remark:null}},methods:{}},Pe=Me,je=(a("a88f"),Object(c["a"])(Pe,Be,Le,!1,null,null,null)),Ue=je.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-Register"},[a("div",{staticClass:"head-btn"},[a("div",{staticClass:"oper-btns-left"},[a("div",{staticClass:"refresh"},[a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新列表 ")])],1)]),["ROOT","ADMIN"].includes(e.userRole)?a("div",{staticClass:"oper-btns-right"},[a("el-button",{staticClass:"bigdel-btn",attrs:{icon:"el-icon-delete"},on:{click:e.delectExtraInfo}},[e._v("批量删除")])],1):e._e()]),a("el-table",{ref:"multipleTable",staticClass:"extraTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleDetailSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"id",label:"任务ID",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:"任务名称"}}),a("el-table-column",{attrs:{prop:"nextDate",label:"下次保养时间"}}),a("el-table-column",{attrs:{prop:"deadline",label:"剩余天数"}}),["ROOT","ADMIN"].includes(e.userRole)?a("el-table-column",{attrs:{prop:"taskuser",label:"保养人员"}}):e._e(),["ROOT","ADMIN"].includes(e.userRole)?a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")]),a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,3581015138)}):a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("查看任务详情")])]}}])})],1)],1)},Fe=[],Ye={created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.userRole=t.data.role})),setTimeout((function(){e.refresh()}),300)},data:function(){return{userRole:"",tableData:[],checkedDetail:[],currentPage:1,page:1,size:10,total:0}},methods:{handleDetailSelectionChange:function(e){this.checkedDetail=e,console.log(this.checkedDetail)},refresh:function(){var e=this;e.tableData=[],m.a.get("http://47.102.214.37:8080/ops/schedule?page=0&size=100").then((function(t){for(var a=function(a){if(["ROOT","ADMIN"].includes(e.userRole)){var n={};n.id=t.data.content[a].id,n.name=t.data.content[a].name;var s="http://47.102.214.37:8080/user/"+t.data.content[a].ops[0].id;m.a.get(s).then((function(e){n.taskuser=e.data.name+" ( ID："+e.data.id+" )"})),setTimeout((function(){var s="http://47.102.214.37:8080/ops/schedule/status/"+t.data.content[a].id;m.a.get(s).then((function(e){null==e.data.nextDate?n.nextDate="暂无":n.nextDate=e.data.nextDate,null==e.data.nextDateDay?n.deadline="暂无":n.deadline=e.data.nextDateDay})),setTimeout((function(){e.tableData.push(n),console.log(e.tableData)}),200)}),200)}else{var o={};o.id=t.data.content[a].id,o.name=t.data.content[a].name;var i="http://47.102.214.37:8080/ops/schedule/status/"+t.data.content[a].id;m.a.get(i).then((function(e){null==e.data.nextDate?o.nextDate="暂无":o.nextDate=e.data.nextDate,null==e.data.nextDateDay?o.deadline="暂无":o.deadline=e.data.nextDateDay})),setTimeout((function(){e.tableData.push(o),console.log(e.tableData)}),200)}},n=0;n<t.data.content.length;n++)a(n);e.$message({message:"刷新成功",type:"success"})}))},handleDetail:function(e){console.log(this.tableData[e]),this.$router.push({path:"/taskDetailInfo",query:this.tableData[e]})},handleEdit:function(e){console.log(this.tableData[e]);var t={};t.taskID=this.tableData[e].id,this.$router.push({path:"/editTask",query:t})},handleDelete:function(e){var t=this,a=this;this.$confirm("删除后无法更改, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="http://47.102.214.37:8080/ops/schedule/"+a.taskData[e].id;m.a.delete(n).then((function(n){200==n.status&&(a.taskData.splice(e,1),t.$message({message:"删除成功",type:"success"}))}))})).catch((function(){a.$message.info("已取消删除")}))},delectExtraInfo:function(){var e=this,t=this;0==this.checkedDetail.length?t.$alert("请先选择要删除的数据","提示",{confirmButtonText:"确定"}):t.$confirm("此用户将被永久删除, \n是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.checkedDetail.forEach((function(a){t.tableData.forEach((function(n,s){if(a.id==n.id){console.log(a,n,s);var o="http://47.102.214.37:8080/ops/schedule/"+n.id;m.a.delete(o).then((function(){e.$message({message:"删除成功",type:"success"}),t.tableData.splice(s,1),t.checkedDetail.pop(),t.total--}))}}))}))})).catch((function(){e.$message.info("已取消删除")}))}}},We=Ye,He=(a("c6f3"),Object(c["a"])(We,Ve,Fe,!1,null,null,null)),Ge=He.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return["ROOT","ADMIN","CREATOR"].includes(e.userRole)?a("div",{staticClass:"Container-TssignTask"},[a("div",{staticStyle:{"padding-bottom":"20px",width:"100%"}},[a("el-breadcrumb",{staticClass:"Breadcrumb"},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备保养")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("任务分配")])],1)],1),a("div",{staticClass:"chuansuo"},[a("div",{staticClass:"kuang"},[a("el-transfer",{attrs:{filterable:"",data:e.data1,titles:e.titles1},on:{change:e.change1},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),a("div",{staticClass:"kuang kuang3"},[a("el-transfer",{attrs:{filterable:"",data:e.data3,titles:e.titles3},on:{change:e.change3},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1),a("div",{staticClass:"Btns"},[a("div",{staticClass:"sub-btn"},[a("el-button",{on:{click:e.Next}},[e._v("下一步")])],1)])])]):e._e()},Ke=[],Xe={name:"AddTaskInside",created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.userRole=t.data.role,e.userID=t.data.id})),setTimeout((function(){["ROOT","ADMIN","CREATOR"].includes(e.userRole)&&(m.a.get("http://47.102.214.37:8080/ops/schedule?page=0&size=100").then((function(t){for(var a=0;a<t.data.content.length;a++){var n={};n.key=t.data.content[a].id,n.label=t.data.content[a].name,e.data1.unshift(n)}})),m.a.get("http://47.102.214.37:8080/device/query?name=!").then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++){var n={};n.key=t.data.content[a].id,n.label=t.data.content[a].name+"（"+t.data.content[a].deviceNo+"）",e.data3.push(n)}})))}),200)},data:function(){return{userRole:"",data1:[],value1:[],titles1:["任务名称","已选择任务"],data3:[],value3:[],titles3:["设备列表","已选择设备"],selectedTaskid:[],selectedDeviceid:[]}},methods:{change1:function(e){var t=this;t.selectedTaskid=[],console.log(e);for(var a=0;a<e.length;a++)t.selectedTaskid.push({id:e[a]})},change3:function(e){var t=this;t.selectedDeviceid=[],console.log(e);for(var a=0;a<e.length;a++)t.selectedDeviceid.push({id:e[a]})},Next:function(){var e=this;if(0==e.selectedTaskid.length||0==e.selectedDeviceid.length)e.$message({message:"请将信息填写完整",type:"warning"});else{console.log(e.selectedTaskid),console.log(e.selectedDeviceid);for(var t={taskid:[],deviceid:[]},a=0;a<e.selectedTaskid.length;a++)t.taskid.push({id:e.selectedTaskid[a].id});for(var n=0;n<e.selectedDeviceid.length;n++)t.deviceid.push({id:e.selectedDeviceid[n].id});console.log(t),this.$router.push({path:"./tssignTask2",query:t})}}}},Qe=Xe,Ze=(a("ba9b"),a("ab7d"),Object(c["a"])(Qe,Je,Ke,!1,null,"4e60cf61",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-TssignTask2"},[a("div",{staticStyle:{"padding-bottom":"20px",width:"100%"}},[a("el-breadcrumb",{staticClass:"Breadcrumb"},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备保养")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("任务分配")])],1)],1),a("div",{staticClass:"chuansuo"},[a("div",{staticClass:"kuang kuang2"},[a("el-transfer",{attrs:{filterable:"",data:e.data2,titles:e.titles2},on:{change:e.change2},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("div",{staticClass:"Btns"},[a("div",{staticClass:"back-btn"},[a("el-button",{on:{click:e.Back}},[e._v("返回")])],1),a("div",{staticClass:"sub-btn"},[a("el-button",{on:{click:e.SubTssign}},[e._v("保存并提交")])],1)])])])},at=[],nt={created:function(){var e=this;console.log(e.$route.query),e.selectedTaskid=e.$route.query.taskid,e.selectedDeviceid=e.$route.query.deviceid,m.a.get("http://47.102.214.37:8080/user/me").then((function(t){e.userid=t.data.id})),m.a.get("http://47.102.214.37:8080/user/query?role==OPERATOR").then((function(t){for(var a=0;a<t.data.content.length;a++){var n={};n.key=t.data.content[a].id,n.label=t.data.content[a].username,e.data2.unshift(n)}}))},data:function(){return{userid:"",data2:[],value2:[],titles2:["人员列表","已选择人员"],selectedTaskid:[],selectedUserid:[],selectedDeviceid:[]}},methods:{change2:function(e){var t=this;console.log(e);for(var a=0;a<e.length;a++)t.selectedUserid.push({id:e[a]})},Back:function(){this.$router.push({path:"./tssignTask"})},SubTssign:function(){var e=this;if(0==e.selectedTaskid.length)e.$message({message:"请将信息填写完整",type:"warning"});else for(var t=function(){var t="http://47.102.214.37:8080/ops/schedule/detail/"+e.selectedTaskid[a].id;console.log(t),m.a.get(t).then((function(a){console.log(a.data);for(var n={},s=[],o=[],i=0;i<e.selectedDeviceid.length;i++)o.push({id:e.selectedDeviceid[i].id});console.log(e.selectedUserid);for(var l=0;l<e.selectedUserid.length;l++)s.push({id:e.selectedUserid[l].id});n.acceptedStandard=a.data.acceptedStandard,n.content=a.data.content,n.id=a.data.id,n.name=a.data.name,n.remark=a.data.remark,n.scheduleType=a.data.scheduleType,n.side=a.data.side,n.tools=a.data.tools,n.device=o,n.ops=s,n.manager={id:e.userid},console.log(n),setTimeout((function(){m.a.put(t,n).then((function(t){console.log(t),e.$message({message:"分配成功",type:"success"})}))}),200)}))},a=0;a<e.selectedTaskid.length;a++)t()}}},st=nt,ot=(a("f92a"),a("9b59"),Object(c["a"])(st,tt,at,!1,null,"d0fb6df4",null)),it=ot.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ErrorTask-container"},[a("div",{staticClass:"Task-info"},[a("div",{staticClass:"title"},[e._v("报修申请单")]),a("div",{staticClass:"Users"},[a("div",{staticClass:"part0"},[a("div",{staticClass:"Text"},[e._v("报告人员")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.reporter)+" ")])])]),a("div",{staticClass:"Name-Number"},[a("div",{staticClass:"part1 Name",staticStyle:{width:"50%"}},[a("div",{staticClass:"Text"},[e._v("设备名称")]),a("el-select",{attrs:{filterable:"",clearable:"",multiple:"",placeholder:"请选择"},on:{change:e.change,clear:e.clear},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},e._l(e.options1,(function(t){return a("el-option",{key:t.value,attrs:{label:t.devicename,value:t.value}},[a("span",{staticStyle:{float:"left","font-size":"13px"}},[e._v(e._s(t.devicename))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"15px"}},[e._v(e._s(t.devicenumber))])])})),1)],1),a("div",{staticClass:"part1 Clazz",staticStyle:{width:"50%"}},[a("div",{staticClass:"Text"},[e._v("设备编号")]),""==e.deviceNo?a("div",{staticClass:"Info"},[e._v("暂无")]):e._l(e.deviceNo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceNoinfo)+" ")])}))],2)]),a("div",{staticClass:"Description-Request"},[a("div",{staticClass:"part2",staticStyle:{width:"50%"}},[a("div",{staticClass:"Text"},[e._v("异常描述")]),a("el-input",{staticStyle:{width:"85%","margin-top":"5px"},attrs:{type:"textarea",rows:3},model:{value:e.descriptionPic,callback:function(t){e.descriptionPic=t},expression:"descriptionPic"}})],1),a("div",{staticClass:"part2 Side",staticStyle:{width:"50%"}},[a("div",{staticClass:"Text"},[e._v("异常处理请求")]),a("el-input",{staticStyle:{width:"85%","margin-top":"5px"},attrs:{type:"textarea",rows:3},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)]),a("div",{staticClass:"SelectOpreator"},[a("div",{staticClass:"part3"},[a("div",{staticClass:"Text"},[e._v("选择报告接受人")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.assignee,callback:function(t){e.assignee=t},expression:"assignee"}},e._l(e.options2,(function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)})),1)],1)]),a("div",{staticClass:"submitbtn"},[a("el-button",{on:{click:e.submit}},[e._v("提交")])],1)])])},ct=[],rt={created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.reporter="姓名："+t.data.name+" | 用户名："+t.data.username+" | 用户ID："+t.data.id,e.userid=t.data.id})),m.a.get("http://47.102.214.37:8080/device/query?name=!").then((function(t){for(var a=0;a<t.data.content.length;a++){var n={};n.value=t.data.content[a].id,n.devicename=t.data.content[a].name,n.devicenumber=t.data.content[a].deviceNo,e.options1.push(n)}})),m.a.get("http://47.102.214.37:8080/user/query").then((function(t){setTimeout((function(){for(var a=0;a<t.data.content.length;a++)"SUPERVISOR"==t.data.content[a].role&&e.options2[0].options.push({value:t.data.content[a].id,label:t.data.content[a].name+" (用户名："+t.data.content[a].username+")"})}),200)}))},data:function(){return{reporter:"",userid:"",device:[],options1:[],descriptionPic:"",content:"",deviceNo:[],assignee:"",options2:[{label:"SUPERVISOR",options:[]}]}},methods:{change:function(e){var t=this;if(t.deviceNo=[],""!=e){console.log(e);for(var a=0;a<e.length;a++){var n="http://47.102.214.37:8080/device/"+e[a];m.a.get(n).then((function(e){console.log(e.data),t.deviceNo.push({deviceNoinfo:e.data.deviceNo})}))}}},clear:function(){this.deviceNo=""},submit:function(){var e=this,t=this;console.log(t.device);var a=[];if(""==t.assignee||t.device==[]||""==t.descriptionPic||""==t.content)t.$message({message:"请将信息填写完整",type:"warning"});else{for(var n=0;n<t.device.length;n++)a.push({id:t.device[n]});console.log(a);var s={assignee:{id:t.assignee},closed:!1,content:t.content,descriptionPic:null,device:a,reporter:{id:t.userid}};console.log(s),m.a.post("http://47.102.214.37:8080/issue",s).then((function(e){console.log(e)})).catch((function(t){console.log(t.response),e.$message({message:"申请失败",type:"error"})}))}}}},dt=rt,ut=(a("409f"),Object(c["a"])(dt,lt,ct,!1,null,null,null)),ft=ut.exports,pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-AllError"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备维修")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("全部异常")])],1),a("div",{staticClass:"Tasks"},e._l(e.taskData,(function(t,n){return a("div",{key:n,staticClass:"card"},[a("div",{staticClass:"content"},[a("h2",[e._v("异常ID："+e._s(t.errorid))]),a("div",{staticClass:"Btns"},[a("el-button",{staticClass:"btn btn1",on:{click:function(t){return e.errordetail(n)}}},[e._v("查看异常")])],1)])])})),0)],1)},vt=[],mt={created:function(){var e=this;m.a.get("http://47.102.214.37:8080/issue?page=0&size=10").then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++)e.taskData.unshift({errorid:t.data.content[a].id})}))},data:function(){return{taskData:[]}},methods:{errordetail:function(e){var t=this;console.log(t.taskData[e]),t.$router.push({path:"./mySubmitDetail",query:t.taskData[e]})}}},ht=mt,bt=(a("c2e6"),Object(c["a"])(ht,pt,vt,!1,null,null,null)),gt=bt.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-FixDiagnosis"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备维修")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("维修诊断")])],1),a("div",{staticClass:"Tasks"},e._l(e.taskData,(function(t,n){return a("div",{key:n,staticClass:"card"},[a("div",{staticClass:"content"},[a("h2",[e._v("异常ID："+e._s(t.errorid))]),a("div",{staticClass:"Btns"},[a("el-button",{staticClass:"btn btn1",on:{click:function(t){return e.errordetail(n)}}},[e._v("诊断异常")])],1)])])})),0)],1)},yt=[],xt={created:function(){var e=this;m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),"OPERATOR"!=t.data.role?setTimeout((function(){m.a.get("http://47.102.214.37:8080/issue?page=0&size=10").then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++)e.taskData.unshift({errorid:t.data.content[a].id})}))}),200):setTimeout((function(){m.a.get("http://47.102.214.37:8080/issue/assignee?page=0&size=10").then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++)e.taskData.unshift({errorid:t.data.content[a].id})}))}),200)}))},data:function(){return{taskData:[]}},methods:{errordetail:function(e){var t=this;console.log(t.taskData[e]),t.$router.push({path:"./diagnosisDetail",query:t.taskData[e]})}}},_t=xt,Ct=(a("0e41"),Object(c["a"])(_t,kt,yt,!1,null,null,null)),Tt=Ct.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-DiagnosisDetail"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备维修")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("异常ID："+e._s(e.errorid)+" ")])],1),a("div",{staticClass:"Task-container"},[a("div",{staticClass:"backbtn"},[a("el-button",{on:{click:e.back}},[e._v("返回")]),a("el-button",{staticClass:"submit",on:{click:e.submitbtn}},[e._v("提交诊断")])],1),a("div",{staticClass:"Task-info"},[a("div",{staticClass:"Users"},[a("div",{staticClass:"part0",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("维修人员")]),e._l(e.fixusers,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.fixusersName)+" ")])}))],2)]),a("div",{staticClass:"Error-name-clazz"},[a("div",{staticClass:"part1",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常ID")]),a("div",{staticClass:"Info"},[e._v(e._s(e.errorid))])]),a("div",{staticClass:"part1 Name",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("设备名称")]),e._l(e.deviceinfo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceName)+" ")])}))],2),a("div",{staticClass:"part1 Clazz"},[a("div",{staticClass:"Text"},[e._v("设备类别")]),e._l(e.deviceinfo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceClazz)+" ")])}))],2)]),a("div",{staticClass:"Errordescription-Errorcontent"},[a("div",{staticClass:"part3 Errordescription",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常描述")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.errordescription)+" ")])]),a("div",{staticClass:"part3 Errorcontent",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常处理请求")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.errorcontent)+" ")])])]),a("div",{staticClass:"Type-Reason-Solution"},[a("div",{staticClass:"part4 Reason",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常发生原因")]),a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:3,placeholder:"异常发生原因"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),a("div",{staticClass:"part4 Solution",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常解决措施")]),a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:3,placeholder:"异常解决措施"},model:{value:e.solution,callback:function(t){e.solution=t},expression:"solution"}})],1),a("div",{staticClass:"part4 ExceptionType"},[a("div",{staticClass:"Text"},[e._v("异常类型")]),a("el-input",{attrs:{type:"text",placeholder:"异常类型"},model:{value:e.exceptionType,callback:function(t){e.exceptionType=t},expression:"exceptionType"}})],1)])])])],1)},Dt=[],wt={created:function(){var e=this;console.log(e.$route.query),e.errorid=e.$route.query.errorid;var t="http://47.102.214.37:8080/issue/"+e.$route.query.errorid;m.a.get(t).then((function(t){console.log(t.data);var a=t.data.assignee.id;e.errorcontent=t.data.content,setTimeout((function(){var t="http://47.102.214.37:8080/user/query?id=="+a;m.a.get(t).then((function(t){e.fixusers.push({fixusersName:t.data.content[0].name+"（ id："+t.data.content[0].id+" ）"})}))}),200);for(var n=0;n<t.data.device.length;n++){var s="http://47.102.214.37:8080/device/"+t.data.device[n].id;m.a.get(s).then((function(t){e.deviceinfo.push({deviceName:t.data.name,deviceClazz:t.data.clazz})}))}}))},data:function(){return{errorid:"",fixusers:[],deviceinfo:[],errordescription:"",errorcontent:"",reason:"",solution:"",exceptionType:""}},methods:{back:function(){this.$router.push("./fixDiagnosis")},submitbtn:function(){var e=this,t={},a="http://47.102.214.37:8080/issue/"+e.errorid;m.a.get(a).then((function(a){console.log(a.data),t.assignee=a.data.assignee,t.closed=a.data.closed,t.content=a.data.content,t.descriptionPic=a.data.descriptionPic,t.device=a.data.device,t.exceptionType=e.exceptionType,t.id=a.data.id,t.reason=e.reason,t.record=a.data.record,t.reporter=a.data.reporter,t.solution=e.solution})),setTimeout((function(){console.log(t),m.a.put(a,t).then((function(t){console.log(t),e.$message({message:"提交成功",type:"success"})}))}),200)}}},$t=wt,zt=(a("cfb1"),Object(c["a"])($t,It,Dt,!1,null,null,null)),St=zt.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-FixDiagnosis"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备维修")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("我发布的")])],1),a("div",{staticClass:"Tasks"},e._l(e.taskData,(function(t,n){return a("div",{key:n,staticClass:"card"},[a("div",{staticClass:"content"},[a("h2",[e._v("异常ID："+e._s(t.errorid))]),a("div",{staticClass:"Btns"},[a("el-button",{staticClass:"btn btn1",on:{click:function(t){return e.errordetail(n)}}},[e._v("查看异常")])],1)])])})),0)],1)},qt=[],Rt={created:function(){var e=this;m.a.get("http://47.102.214.37:8080/issue/reporter?page=0&size=10").then((function(t){console.log(t.data);for(var a=0;a<t.data.content.length;a++)e.taskData.unshift({errorid:t.data.content[a].id})}))},data:function(){return{taskData:[]}},methods:{errordetail:function(e){var t=this;console.log(t.taskData[e]),t.$router.push({path:"./mySubmitDetail",query:t.taskData[e]})}}},Ot=Rt,Nt=(a("945e"),Object(c["a"])(Ot,Et,qt,!1,null,null,null)),At=Nt.exports,Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Container-MySubmitDetail"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{staticClass:"pathActive"},[e._v("设备维修")]),a("el-breadcrumb-item",{staticClass:"active"},[e._v("异常ID："+e._s(e.errorid)+" ")])],1),a("div",{staticClass:"Task-container"},[a("div",{staticClass:"backbtn"},[e.reporterid==e.userid?a("div",{staticClass:"backbtn_right"},[a("el-button",{staticClass:"confirm",on:{click:e.confirm}},[e._v("确认")]),a("el-button",{staticClass:"refuse",on:{click:e.refuse}},[e._v("拒绝")])],1):e._e()]),a("div",{staticClass:"Task-info"},[a("div",{staticClass:"Users"},[a("div",{staticClass:"part0",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("维修人员")]),e._l(e.fixusers,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.fixusersName)+" ")])}))],2)]),a("div",{staticClass:"Error-name-clazz"},[a("div",{staticClass:"part1",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常ID")]),a("div",{staticClass:"Info"},[e._v(e._s(e.errorid))])]),a("div",{staticClass:"part1 Name",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("设备名称")]),e._l(e.deviceinfo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceName)+" ")])}))],2),a("div",{staticClass:"part1 Clazz"},[a("div",{staticClass:"Text"},[e._v("设备类别")]),e._l(e.deviceinfo,(function(t,n){return a("div",{key:n,staticClass:"Info"},[e._v(" "+e._s(t.deviceClazz)+" ")])}))],2)]),a("div",{staticClass:"Errordescription-Errorcontent"},[a("div",{staticClass:"part3 Errordescription",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常描述")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.errordescription)+" ")])]),a("div",{staticClass:"part3 Errorcontent",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常处理请求")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.errorcontent)+" ")])])]),a("div",{staticClass:"Type-Reason-Solution"},[a("div",{staticClass:"part4 Reason",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常发生原因")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.reason)+" ")])]),a("div",{staticClass:"part4 Solution",staticStyle:{width:"40%"}},[a("div",{staticClass:"Text"},[e._v("异常解决措施")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.solution)+" ")])]),a("div",{staticClass:"part4 ExceptionType"},[a("div",{staticClass:"Text"},[e._v("异常类型")]),a("div",{staticClass:"Info"},[e._v(" "+e._s(e.exceptionType)+" ")])])])])])],1)},Lt=[],Mt={created:function(){var e=this,t=this;console.log(t.$route.query),t.errorid=t.$route.query.errorid,m.a.get("http://47.102.214.37:8080/user/me").then((function(t){console.log(t.data),e.userid=t.data.id}));var a="http://47.102.214.37:8080/issue/"+t.$route.query.errorid;m.a.get(a).then((function(e){console.log(e.data);var a=e.data.assignee.id;t.reporterid=e.data.reporter.id,t.assigneeid=e.data.assignee.id,t.errorcontent=e.data.content,t.reason=e.data.reason,t.solution=e.data.solution,t.exceptionType=e.data.exceptionType,setTimeout((function(){var e="http://47.102.214.37:8080/user/query?id=="+a;m.a.get(e).then((function(e){t.fixusers.push({fixusersName:e.data.content[0].name+"（ id："+e.data.content[0].id+" ）"})}))}),200);for(var n=0;n<e.data.device.length;n++){var s="http://47.102.214.37:8080/device/"+e.data.device[n].id;m.a.get(s).then((function(e){t.deviceinfo.push({deviceName:e.data.name,deviceClazz:e.data.clazz})}))}})),setTimeout((function(){console.log(t.assigneeid,t.userid)}),200)},data:function(){return{errorid:"",userid:"",assigneeid:"",reporterid:"",fixusers:[],deviceinfo:[],errordescription:"",errorcontent:"",reason:"",solution:"",exceptionType:""}},methods:{confirm:function(){},refuse:function(){}}},Pt=Mt,jt=(a("a5c0"),Object(c["a"])(Pt,Bt,Lt,!1,null,null,null)),Ut=jt.exports,Vt=function(){return a.e("chunk-28f0112b").then(a.bind(null,"f398"))},Ft=function(){return a.e("chunk-072d4340").then(a.bind(null,"57da"))};n["default"].use(u["a"]);var Yt=[{path:"/",name:"Login",component:Vt},{path:"/",component:Ft,redirect:"/users",children:[{path:"/users",component:k},{path:"/userList",component:I},{path:"/authorize",component:E},{path:"/edituser",component:B},{path:"/addDevice",component:V},{path:"/deviceInformation",component:J},{path:"/editDevice",component:te},{path:"/code",component:le},{path:"/addTask",component:pe},{path:"/addTaskInside",component:ke},{path:"/editTask",component:Ie},{path:"/taskInformation",component:Ae},{path:"/taskDetailInfo",component:Ue},{path:"/totalTaskList",component:Ge},{path:"/tssignTask",component:et},{path:"/tssignTask2",component:it},{path:"/allError",component:gt},{path:"/fixApply",component:ft},{path:"/fixDiagnosis",component:Tt},{path:"/diagnosisDetail",component:St},{path:"/mySubmit",component:At},{path:"/mySubmitDetail",component:Ut}]}],Wt=new u["a"]({routes:Yt}),Ht=Wt,Gt=a("5c96"),Jt=a.n(Gt);a("0fae"),a("34c4"),a("82da");n["default"].prototype.$http=m.a,n["default"].config.productionTip=!1,n["default"].use(Jt.a),new n["default"]({el:"#app",router:Ht,render:function(e){return e(d)}}).$mount("#app")},"6aa7":function(e,t,a){},"6f7d":function(e,t,a){},"73f2":function(e,t,a){},"7d6c":function(e,t,a){e.exports=a.p+"img/register.c2970469.png"},"7ef6":function(e,t,a){"use strict";a("eae6")},"82da":function(e,t,a){},"85ec":function(e,t,a){},"88d9":function(e,t,a){},"945e":function(e,t,a){"use strict";a("056a")},9847:function(e,t,a){},"9b3f":function(e,t,a){},"9b59":function(e,t,a){"use strict";a("be27")},a49e:function(e,t,a){},a5c0:function(e,t,a){"use strict";a("edee")},a86b:function(e,t,a){"use strict";a("5051")},a88f:function(e,t,a){"use strict";a("02ea")},ab7d:function(e,t,a){"use strict";a("15c9")},ba9b:function(e,t,a){"use strict";a("9847")},bd03:function(e,t,a){},be27:function(e,t,a){},c000:function(e,t,a){"use strict";a("f5ed")},c2e6:function(e,t,a){"use strict";a("181c")},c6f3:function(e,t,a){"use strict";a("406b")},c8ec:function(e,t,a){e.exports=a.p+"img/authorize.783291c7.png"},ce46:function(e,t,a){"use strict";a("a49e")},cfb1:function(e,t,a){"use strict";a("4ff1")},d590:function(e,t,a){"use strict";a("11e3")},da3e:function(e,t,a){e.exports=a.p+"img/login-success.5d7a1016.png"},db90:function(e,t,a){},df4d:function(e,t,a){"use strict";a("00ea")},eae4:function(e,t,a){"use strict";a("2a15")},eae6:function(e,t,a){},edee:function(e,t,a){},f5ed:function(e,t,a){},f92a:function(e,t,a){"use strict";a("6f7d")}});
//# sourceMappingURL=app.81b059fe.js.map